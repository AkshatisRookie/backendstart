"use strict";var zo=Object.create;var Xe=Object.defineProperty;var Ho=Object.getOwnPropertyDescriptor;var Uo=Object.getOwnPropertyNames;var No=Object.getPrototypeOf,Do=Object.prototype.hasOwnProperty;var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Bo=(e,t)=>{for(var r in t)Xe(e,r,{get:t[r],enumerable:!0})},ys=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Uo(t))!Do.call(e,n)&&n!==r&&Xe(e,n,{get:()=>t[n],enumerable:!(s=Ho(t,n))||s.enumerable});return e};var $o=(e,t,r)=>(r=e!=null?zo(No(e)):{},ys(t||!e||!e.__esModule?Xe(r,"default",{value:e,enumerable:!0}):r,e)),Wo=e=>ys(Xe({},"__esModule",{value:!0}),e);var bs=x((nd,gs)=>{var me=1e3,pe=me*60,ye=pe*60,fe=ye*24,Go=fe*7,Vo=fe*365.25;gs.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Jo(e);if(r==="number"&&isFinite(e))return t.long?Yo(e):Ko(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Jo(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*Vo;case"weeks":case"week":case"w":return r*Go;case"days":case"day":case"d":return r*fe;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ye;case"minutes":case"minute":case"mins":case"min":case"m":return r*pe;case"seconds":case"second":case"secs":case"sec":case"s":return r*me;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ko(e){var t=Math.abs(e);return t>=fe?Math.round(e/fe)+"d":t>=ye?Math.round(e/ye)+"h":t>=pe?Math.round(e/pe)+"m":t>=me?Math.round(e/me)+"s":e+"ms"}function Yo(e){var t=Math.abs(e);return t>=fe?Ze(e,t,fe,"day"):t>=ye?Ze(e,t,ye,"hour"):t>=pe?Ze(e,t,pe,"minute"):t>=me?Ze(e,t,me,"second"):e+" ms"}function Ze(e,t,r,s){var n=t>=r*1.5;return Math.round(e/r)+" "+s+(n?"s":"")}});var Wt=x((id,ws)=>{function Qo(e){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=n,r.enabled=i,r.humanize=bs(),r.destroy=f,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(l){let d,h=null,y,g;function b(...m){if(!b.enabled)return;let w=b,v=Number(new Date),C=v-(d||v);w.diff=C,w.prev=d,w.curr=v,d=v,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let O=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(J,F)=>{if(J==="%%")return"%";O++;let K=r.formatters[F];if(typeof K=="function"){let $t=m[O];J=K.call(w,$t),m.splice(O,1),O--}return J}),r.formatArgs.call(w,m),(w.log||r.log).apply(w,m)}return b.namespace=l,b.useColors=r.useColors(),b.color=r.selectColor(l),b.extend=s,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(y!==r.namespaces&&(y=r.namespaces,g=r.enabled(l)),g),set:m=>{h=m}}),typeof r.init=="function"&&r.init(b),b}function s(l,d){let h=r(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function n(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d,h=(typeof l=="string"?l:"").split(/[\s,]+/),y=h.length;for(d=0;d<y;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),l}function i(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(l))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}ws.exports=Qo});var _s=x((j,et)=>{j.formatArgs=Zo;j.save=ea;j.load=ta;j.useColors=Xo;j.storage=ra();j.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();j.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Xo(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Zo(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+et.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(s=r))}),e.splice(s,0,t)}j.log=console.debug||console.log||(()=>{});function ea(e){try{e?j.storage.setItem("debug",e):j.storage.removeItem("debug")}catch{}}function ta(){let e;try{e=j.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function ra(){try{return localStorage}catch{}}et.exports=Wt()(j);var{formatters:sa}=et.exports;sa.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var vs=x((od,xs)=>{"use strict";xs.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return s!==-1&&(n===-1||s<n)}});var Ss=x((ad,Cs)=>{"use strict";var na=require("os"),Es=require("tty"),M=vs(),{env:P}=process,re;M("no-color")||M("no-colors")||M("color=false")||M("color=never")?re=0:(M("color")||M("colors")||M("color=true")||M("color=always"))&&(re=1);"FORCE_COLOR"in P&&(P.FORCE_COLOR==="true"?re=1:P.FORCE_COLOR==="false"?re=0:re=P.FORCE_COLOR.length===0?1:Math.min(parseInt(P.FORCE_COLOR,10),3));function Gt(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Vt(e,t){if(re===0)return 0;if(M("color=16m")||M("color=full")||M("color=truecolor"))return 3;if(M("color=256"))return 2;if(e&&!t&&re===void 0)return 0;let r=re||0;if(P.TERM==="dumb")return r;if(process.platform==="win32"){let s=na.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in P)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(s=>s in P)||P.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in P)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(P.TEAMCITY_VERSION)?1:0;if(P.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in P){let s=parseInt((P.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(P.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(P.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(P.TERM)||"COLORTERM"in P?1:r}function ia(e){let t=Vt(e,e&&e.isTTY);return Gt(t)}Cs.exports={supportsColor:ia,stdout:Gt(Vt(!0,Es.isatty(1))),stderr:Gt(Vt(!0,Es.isatty(2)))}});var Rs=x((A,rt)=>{var oa=require("tty"),tt=require("util");A.init=ha;A.log=fa;A.formatArgs=ca;A.save=da;A.load=la;A.useColors=aa;A.destroy=tt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");A.colors=[6,2,3,4,5,1];try{let e=Ss();e&&(e.stderr||e).level>=2&&(A.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}A.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,o)=>o.toUpperCase()),s=process.env[t];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),e[r]=s,e},{});function aa(){return"colors"in A.inspectOpts?Boolean(A.inspectOpts.colors):oa.isatty(process.stderr.fd)}function ca(e){let{namespace:t,useColors:r}=this;if(r){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),o=`  ${n};1m${t} \x1B[0m`;e[0]=o+e[0].split(`
`).join(`
`+o),e.push(n+"m+"+rt.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=ua()+t+" "+e[0]}function ua(){return A.inspectOpts.hideDate?"":new Date().toISOString()+" "}function fa(...e){return process.stderr.write(tt.format(...e)+`
`)}function da(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function la(){return process.env.DEBUG}function ha(e){e.inspectOpts={};let t=Object.keys(A.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=A.inspectOpts[t[r]]}rt.exports=Wt()(A);var{formatters:Ts}=rt.exports;Ts.o=function(e){return this.inspectOpts.colors=this.useColors,tt.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Ts.O=function(e){return this.inspectOpts.colors=this.useColors,tt.inspect(e,this.inspectOpts)}});var Os=x((cd,Jt)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Jt.exports=_s():Jt.exports=Rs()});var ks=x((ud,As)=>{As.exports=Ps;function Ps(e,t){if(e&&t)return Ps(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(s){r[s]=e[s]}),r;function r(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];var o=e.apply(this,s),i=s[s.length-1];return typeof o=="function"&&o!==i&&Object.keys(i).forEach(function(a){o[a]=i[a]}),o}}});var Yt=x((fd,Kt)=>{var qs=ks();Kt.exports=qs(st);Kt.exports.strict=qs(Is);st.proto=st(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return st(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Is(this)},configurable:!0})});function st(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Is(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var js=x((dd,Fs)=>{var ma=Yt(),pa=function(){},ya=function(e){return e.setHeader&&typeof e.abort=="function"},ga=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Ls=function(e,t,r){if(typeof t=="function")return Ls(e,null,t);t||(t={}),r=ma(r||pa);var s=e._writableState,n=e._readableState,o=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,a=!1,u=function(){e.writable||f()},f=function(){i=!1,o||r.call(e)},l=function(){o=!1,i||r.call(e)},d=function(m){r.call(e,m?new Error("exited with error code: "+m):null)},h=function(m){r.call(e,m)},y=function(){process.nextTick(g)},g=function(){if(!a){if(o&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"));if(i&&!(s&&s.ended&&!s.destroyed))return r.call(e,new Error("premature close"))}},b=function(){e.req.on("finish",f)};return ya(e)?(e.on("complete",f),e.on("abort",y),e.req?b():e.on("request",b)):i&&!s&&(e.on("end",u),e.on("close",u)),ga(e)&&e.on("exit",d),e.on("end",l),e.on("finish",f),t.error!==!1&&e.on("error",h),e.on("close",y),function(){a=!0,e.removeListener("complete",f),e.removeListener("abort",y),e.removeListener("request",b),e.req&&e.req.removeListener("finish",f),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("exit",d),e.removeListener("end",l),e.removeListener("error",h),e.removeListener("close",y)}};Fs.exports=Ls});var Hs=x((ld,zs)=>{var ba=Yt(),wa=js(),Qt=require("fs"),ze=function(){},_a=/^v?\.0/.test(process.version),nt=function(e){return typeof e=="function"},xa=function(e){return!_a||!Qt?!1:(e instanceof(Qt.ReadStream||ze)||e instanceof(Qt.WriteStream||ze))&&nt(e.close)},va=function(e){return e.setHeader&&nt(e.abort)},Ea=function(e,t,r,s){s=ba(s);var n=!1;e.on("close",function(){n=!0}),wa(e,{readable:t,writable:r},function(i){if(i)return s(i);n=!0,s()});var o=!1;return function(i){if(!n&&!o){if(o=!0,xa(e))return e.close(ze);if(va(e))return e.abort();if(nt(e.destroy))return e.destroy();s(i||new Error("stream was destroyed"))}}},Ms=function(e){e()},Ca=function(e,t){return e.pipe(t)},Sa=function(){var e=Array.prototype.slice.call(arguments),t=nt(e[e.length-1]||ze)&&e.pop()||ze;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,s=e.map(function(n,o){var i=o<e.length-1,a=o>0;return Ea(n,i,a,function(u){r||(r=u),u&&s.forEach(Ms),!i&&(s.forEach(Ms),t(r))})});return e.reduce(Ca)};zs.exports=Sa});var Ns=x((hd,Us)=>{"use strict";var{PassThrough:Ta}=require("stream");Us.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,s=r==="buffer",n=!1;t?n=!(r||s):r=r||"utf8",s&&(r=null);let o=new Ta({objectMode:n});r&&o.setEncoding(r);let i=0,a=[];return o.on("data",u=>{a.push(u),n?i=a.length:i+=u.length}),o.getBufferedValue=()=>t?a:s?Buffer.concat(a,i):a.join(""),o.getBufferedLength=()=>i,o}});var Xt=x((md,ge)=>{"use strict";var{constants:Ra}=require("buffer"),Oa=Hs(),Pa=Ns(),it=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function ot(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,s;return await new Promise((n,o)=>{let i=a=>{a&&s.getBufferedLength()<=Ra.MAX_LENGTH&&(a.bufferedData=s.getBufferedValue()),o(a)};s=Oa(e,Pa(t),a=>{if(a){i(a);return}n()}),s.on("data",()=>{s.getBufferedLength()>r&&i(new it)})}),s.getBufferedValue()}ge.exports=ot;ge.exports.default=ot;ge.exports.buffer=(e,t)=>ot(e,{...t,encoding:"buffer"});ge.exports.array=(e,t)=>ot(e,{...t,array:!0});ge.exports.MaxBufferError=it});var Ws=x((pd,$s)=>{$s.exports=at;function at(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}at.prototype.go=function(e){this.pending<this.max?Bs(this,e):this.waiting.push(e)};at.prototype.wait=function(e){this.pending===0?e(this.error):this.listeners.push(e)};at.prototype.hold=function(){return Ds(this)};function Ds(e){e.pending+=1;var t=!1;return r;function r(n){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||n,e.pending-=1,e.waiting.length>0&&e.pending<e.max)Bs(e,e.waiting.shift());else if(e.pending===0){var o=e.listeners;e.listeners=[],o.forEach(s)}}function s(n){n(e.error)}}function Bs(e,t){t(Ds(e))}});var Vs=x(Ue=>{var He=require("fs"),ct=require("util"),Zt=require("stream"),Gs=Zt.Readable,er=Zt.Writable,Aa=Zt.PassThrough,ka=Ws(),ut=require("events").EventEmitter;Ue.createFromBuffer=qa;Ue.createFromFd=Ia;Ue.BufferSlicer=Q;Ue.FdSlicer=Y;ct.inherits(Y,ut);function Y(e,t){t=t||{},ut.call(this),this.fd=e,this.pend=new ka,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}Y.prototype.read=function(e,t,r,s,n){var o=this;o.pend.go(function(i){He.read(o.fd,e,t,r,s,function(a,u,f){i(),n(a,u,f)})})};Y.prototype.write=function(e,t,r,s,n){var o=this;o.pend.go(function(i){He.write(o.fd,e,t,r,s,function(a,u,f){i(),n(a,u,f)})})};Y.prototype.createReadStream=function(e){return new ft(this,e)};Y.prototype.createWriteStream=function(e){return new dt(this,e)};Y.prototype.ref=function(){this.refCount+=1};Y.prototype.unref=function(){var e=this;if(e.refCount-=1,e.refCount>0)return;if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&He.close(e.fd,t);function t(r){r?e.emit("error",r):e.emit("close")}};ct.inherits(ft,Gs);function ft(e,t){t=t||{},Gs.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}ft.prototype._read=function(e){var t=this;if(!t.destroyed){var r=Math.min(t._readableState.highWaterMark,e);if(t.endOffset!=null&&(r=Math.min(r,t.endOffset-t.pos)),r<=0){t.destroyed=!0,t.push(null),t.context.unref();return}t.context.pend.go(function(s){if(t.destroyed)return s();var n=new Buffer(r);He.read(t.context.fd,n,0,r,t.pos,function(o,i){o?t.destroy(o):i===0?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=i,t.push(n.slice(0,i))),s()})})}};ft.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())};ct.inherits(dt,er);function dt(e,t){t=t||{},er.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end==null?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}dt.prototype._write=function(e,t,r){var s=this;if(!s.destroyed){if(s.pos+e.length>s.endOffset){var n=new Error("maximum file length exceeded");n.code="ETOOBIG",s.destroy(),r(n);return}s.context.pend.go(function(o){if(s.destroyed)return o();He.write(s.context.fd,e,0,e.length,s.pos,function(i,a){i?(s.destroy(),o(),r(i)):(s.bytesWritten+=a,s.pos+=a,s.emit("progress"),o(),r())})})}};dt.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};ct.inherits(Q,ut);function Q(e,t){ut.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}Q.prototype.read=function(e,t,r,s,n){var o=s+r,i=o-this.buffer.length,a=i>0?i:r;this.buffer.copy(e,t,s,o),setImmediate(function(){n(null,a)})};Q.prototype.write=function(e,t,r,s,n){e.copy(this.buffer,s,t,t+r),setImmediate(function(){n(null,r,e)})};Q.prototype.createReadStream=function(e){e=e||{};var t=new Aa(e);t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var r=this.buffer.slice(t.start,t.pos),s=0;;){var n=s+this.maxChunkSize;if(n>=r.length){s<r.length&&t.write(r.slice(s,r.length));break}t.write(r.slice(s,n)),s=n}return t.end(),t.destroy=function(){t.destroyed=!0},t};Q.prototype.createWriteStream=function(e){var t=this;e=e||{};var r=new er(e);return r.start=e.start||0,r.endOffset=e.end==null?this.buffer.length:+e.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(s,n,o){if(!r.destroyed){var i=r.pos+s.length;if(i>r.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",r.destroyed=!0,o(a);return}s.copy(t.buffer,r.pos,0,s.length),r.bytesWritten+=s.length,r.pos=i,r.emit("progress"),o()}},r.destroy=function(){r.destroyed=!0},r};Q.prototype.ref=function(){this.refCount+=1};Q.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function qa(e,t){return new Q(e,t)}function Ia(e,t){return new Y(e,t)}});var Ys=x((gd,Ks)=>{var se=require("buffer").Buffer,tr=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(tr=new Int32Array(tr));function Js(e){if(se.isBuffer(e))return e;var t=typeof se.alloc=="function"&&typeof se.from=="function";if(typeof e=="number")return t?se.alloc(e):new se(e);if(typeof e=="string")return t?se.from(e):new se(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function La(e){var t=Js(4);return t.writeInt32BE(e,0),t}function rr(e,t){e=Js(e),se.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=~~t^-1,s=0;s<e.length;s++)r=tr[(r^e[s])&255]^r>>>8;return r^-1}function sr(){return La(rr.apply(null,arguments))}sr.signed=function(){return rr.apply(null,arguments)};sr.unsigned=function(){return rr.apply(null,arguments)>>>0};Ks.exports=sr});var sn=x(G=>{var nr=require("fs"),Fa=require("zlib"),Qs=Vs(),ja=Ys(),mt=require("util"),pt=require("events").EventEmitter,Xs=require("stream").Transform,ir=require("stream").PassThrough,Ma=require("stream").Writable;G.open=za;G.fromFd=Zs;G.fromBuffer=Ha;G.fromRandomAccessReader=or;G.dosDateTimeToDate=tn;G.validateFileName=rn;G.ZipFile=ne;G.Entry=Ne;G.RandomAccessReader=ie;function za(e,t,r){typeof t=="function"&&(r=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0),t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),r==null&&(r=ht),nr.open(e,"r",function(s,n){if(s)return r(s);Zs(n,t,function(o,i){o&&nr.close(n,ht),r(o,i)})})}function Zs(e,t,r){typeof t=="function"&&(r=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!1),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0),t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),r==null&&(r=ht),nr.fstat(e,function(s,n){if(s)return r(s);var o=Qs.createFromFd(e,{autoClose:!0});or(o,n.size,t,r)})}function Ha(e,t,r){typeof t=="function"&&(r=t,t=null),t==null&&(t={}),t.autoClose=!1,t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0),t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1);var s=Qs.createFromBuffer(e,{maxChunkSize:65536});or(s,e.length,t,r)}function or(e,t,r,s){typeof r=="function"&&(s=r,r=null),r==null&&(r={}),r.autoClose==null&&(r.autoClose=!0),r.lazyEntries==null&&(r.lazyEntries=!1),r.decodeStrings==null&&(r.decodeStrings=!0);var n=!!r.decodeStrings;if(r.validateEntrySizes==null&&(r.validateEntrySizes=!0),r.strictFileNames==null&&(r.strictFileNames=!1),s==null&&(s=ht),typeof t!="number")throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=22,i=65535,a=Math.min(o+i,t),u=W(a),f=t-u.length;be(e,u,0,a,f,function(l){if(l)return s(l);for(var d=a-o;d>=0;d-=1)if(u.readUInt32LE(d)===101010256){var h=u.slice(d),y=h.readUInt16LE(4);if(y!==0)return s(new Error("multi-disk zip files are not supported: found disk number: "+y));var g=h.readUInt16LE(10),b=h.readUInt32LE(16),m=h.readUInt16LE(20),w=h.length-o;if(m!==w)return s(new Error("invalid comment length. expected: "+w+". found: "+m));var v=n?lt(h,22,h.length,!1):h.slice(22);if(!(g===65535||b===4294967295))return s(null,new ne(e,b,t,g,v,r.autoClose,r.lazyEntries,n,r.validateEntrySizes,r.strictFileNames));var C=W(20),O=f+d-C.length;be(e,C,0,C.length,O,function(L){if(L)return s(L);if(C.readUInt32LE(0)!==117853008)return s(new Error("invalid zip64 end of central directory locator signature"));var J=we(C,8),F=W(56);be(e,F,0,F.length,J,function(K){return K?s(K):F.readUInt32LE(0)!==101075792?s(new Error("invalid zip64 end of central directory record signature")):(g=we(F,32),b=we(F,48),s(null,new ne(e,b,t,g,v,r.autoClose,r.lazyEntries,n,r.validateEntrySizes,r.strictFileNames)))})});return}s(new Error("end of central directory record signature not found"))})}mt.inherits(ne,pt);function ne(e,t,r,s,n,o,i,a,u,f){var l=this;pt.call(l),l.reader=e,l.reader.on("error",function(d){en(l,d)}),l.reader.once("close",function(){l.emit("close")}),l.readEntryCursor=t,l.fileSize=r,l.entryCount=s,l.comment=n,l.entriesRead=0,l.autoClose=!!o,l.lazyEntries=!!i,l.decodeStrings=!!a,l.validateEntrySizes=!!u,l.strictFileNames=!!f,l.isOpen=!0,l.emittedError=!1,l.lazyEntries||l._readEntry()}ne.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function N(e,t){e.autoClose&&e.close(),en(e,t)}function en(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}ne.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};ne.prototype._readEntry=function(){var e=this;if(e.entryCount===e.entriesRead){setImmediate(function(){e.autoClose&&e.close(),!e.emittedError&&e.emit("end")});return}if(!e.emittedError){var t=W(46);be(e.reader,t,0,t.length,e.readEntryCursor,function(r){if(r)return N(e,r);if(!e.emittedError){var s=new Ne,n=t.readUInt32LE(0);if(n!==33639248)return N(e,new Error("invalid central directory file header signature: 0x"+n.toString(16)));if(s.versionMadeBy=t.readUInt16LE(4),s.versionNeededToExtract=t.readUInt16LE(6),s.generalPurposeBitFlag=t.readUInt16LE(8),s.compressionMethod=t.readUInt16LE(10),s.lastModFileTime=t.readUInt16LE(12),s.lastModFileDate=t.readUInt16LE(14),s.crc32=t.readUInt32LE(16),s.compressedSize=t.readUInt32LE(20),s.uncompressedSize=t.readUInt32LE(24),s.fileNameLength=t.readUInt16LE(28),s.extraFieldLength=t.readUInt16LE(30),s.fileCommentLength=t.readUInt16LE(32),s.internalFileAttributes=t.readUInt16LE(36),s.externalFileAttributes=t.readUInt32LE(38),s.relativeOffsetOfLocalHeader=t.readUInt32LE(42),s.generalPurposeBitFlag&64)return N(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=W(s.fileNameLength+s.extraFieldLength+s.fileCommentLength),be(e.reader,t,0,t.length,e.readEntryCursor,function(o){if(o)return N(e,o);if(!e.emittedError){var i=(s.generalPurposeBitFlag&2048)!==0;s.fileName=e.decodeStrings?lt(t,0,s.fileNameLength,i):t.slice(0,s.fileNameLength);var a=s.fileNameLength+s.extraFieldLength,u=t.slice(s.fileNameLength,a);s.extraFields=[];for(var f=0;f<u.length-3;){var l=u.readUInt16LE(f+0),d=u.readUInt16LE(f+2),h=f+4,y=h+d;if(y>u.length)return N(e,new Error("extra field length exceeds extra field buffer size"));var g=W(d);u.copy(g,0,h,y),s.extraFields.push({id:l,data:g}),f=y}if(s.fileComment=e.decodeStrings?lt(t,a,a+s.fileCommentLength,i):t.slice(a,a+s.fileCommentLength),s.comment=s.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,s.uncompressedSize===4294967295||s.compressedSize===4294967295||s.relativeOffsetOfLocalHeader===4294967295){for(var b=null,f=0;f<s.extraFields.length;f++){var m=s.extraFields[f];if(m.id===1){b=m.data;break}}if(b==null)return N(e,new Error("expected zip64 extended information extra field"));var w=0;if(s.uncompressedSize===4294967295){if(w+8>b.length)return N(e,new Error("zip64 extended information extra field does not include uncompressed size"));s.uncompressedSize=we(b,w),w+=8}if(s.compressedSize===4294967295){if(w+8>b.length)return N(e,new Error("zip64 extended information extra field does not include compressed size"));s.compressedSize=we(b,w),w+=8}if(s.relativeOffsetOfLocalHeader===4294967295){if(w+8>b.length)return N(e,new Error("zip64 extended information extra field does not include relative header offset"));s.relativeOffsetOfLocalHeader=we(b,w),w+=8}}if(e.decodeStrings)for(var f=0;f<s.extraFields.length;f++){var m=s.extraFields[f];if(m.id===28789){if(m.data.length<6||m.data.readUInt8(0)!==1)continue;var v=m.data.readUInt32LE(1);if(ja.unsigned(t.slice(0,s.fileNameLength))!==v)continue;s.fileName=lt(m.data,5,m.data.length,!0);break}}if(e.validateEntrySizes&&s.compressionMethod===0){var C=s.uncompressedSize;if(s.isEncrypted()&&(C+=12),s.compressedSize!==C){var O="compressed/uncompressed size mismatch for stored file: "+s.compressedSize+" != "+s.uncompressedSize;return N(e,new Error(O))}}if(e.decodeStrings){e.strictFileNames||(s.fileName=s.fileName.replace(/\\/g,"/"));var L=rn(s.fileName,e.validateFileNameOptions);if(L!=null)return N(e,new Error(L))}e.emit("entry",s),e.lazyEntries||e._readEntry()}})}})}};ne.prototype.openReadStream=function(e,t,r){var s=this,n=0,o=e.compressedSize;if(r==null)r=t,t={};else{if(t.decrypt!=null){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(t.decrypt!==!1)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&t.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(t.decompress!=null){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(t.decompress===!1||t.decompress===!0))throw new Error("invalid options.decompress value: "+t.decompress)}if(t.start!=null||t.end!=null){if(e.isCompressed()&&t.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&t.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(t.start!=null){if(n=t.start,n<0)throw new Error("options.start < 0");if(n>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(t.end!=null){if(o=t.end,o<0)throw new Error("options.end < 0");if(o>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(o<n)throw new Error("options.end < options.start")}}if(!s.isOpen)return r(new Error("closed"));if(e.isEncrypted()&&t.decrypt!==!1)return r(new Error("entry is encrypted, and options.decrypt !== false"));s.reader.ref();var i=W(30);be(s.reader,i,0,i.length,e.relativeOffsetOfLocalHeader,function(a){try{if(a)return r(a);var u=i.readUInt32LE(0);if(u!==67324752)return r(new Error("invalid local file header signature: 0x"+u.toString(16)));var f=i.readUInt16LE(26),l=i.readUInt16LE(28),d=e.relativeOffsetOfLocalHeader+i.length+f+l,h;if(e.compressionMethod===0)h=!1;else if(e.compressionMethod===8)h=t.decompress!=null?t.decompress:!0;else return r(new Error("unsupported compression method: "+e.compressionMethod));var y=d,g=y+e.compressedSize;if(e.compressedSize!==0&&g>s.fileSize)return r(new Error("file data overflows file bounds: "+y+" + "+e.compressedSize+" > "+s.fileSize));var b=s.reader.createReadStream({start:y+n,end:y+o}),m=b;if(h){var w=!1,v=Fa.createInflateRaw();b.on("error",function(C){setImmediate(function(){w||v.emit("error",C)})}),b.pipe(v),s.validateEntrySizes?(m=new De(e.uncompressedSize),v.on("error",function(C){setImmediate(function(){w||m.emit("error",C)})}),v.pipe(m)):m=v,m.destroy=function(){w=!0,v!==m&&v.unpipe(m),b.unpipe(v),b.destroy()}}r(null,m)}finally{s.reader.unref()}})};function Ne(){}Ne.prototype.getLastModDate=function(){return tn(this.lastModFileDate,this.lastModFileTime)};Ne.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Ne.prototype.isCompressed=function(){return this.compressionMethod===8};function tn(e,t){var r=e&31,s=(e>>5&15)-1,n=(e>>9&127)+1980,o=0,i=(t&31)*2,a=t>>5&63,u=t>>11&31;return new Date(n,s,r,u,a,i,o)}function rn(e){return e.indexOf("\\")!==-1?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:e.split("/").indexOf("..")!==-1?"invalid relative path: "+e:null}function be(e,t,r,s,n,o){if(s===0)return setImmediate(function(){o(null,W(0))});e.read(t,r,s,n,function(i,a){if(i)return o(i);if(a<s)return o(new Error("unexpected EOF"));o()})}mt.inherits(De,Xs);function De(e){Xs.call(this),this.actualByteCount=0,this.expectedByteCount=e}De.prototype._transform=function(e,t,r){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var s="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(s))}r(null,e)};De.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()};mt.inherits(ie,pt);function ie(){pt.call(this),this.refCount=0}ie.prototype.ref=function(){this.refCount+=1};ie.prototype.unref=function(){var e=this;if(e.refCount-=1,e.refCount>0)return;if(e.refCount<0)throw new Error("invalid unref");e.close(t);function t(r){if(r)return e.emit("error",r);e.emit("close")}};ie.prototype.createReadStream=function(e){var t=e.start,r=e.end;if(t===r){var s=new ir;return setImmediate(function(){s.end()}),s}var n=this._readStreamForRange(t,r),o=!1,i=new yt(this);n.on("error",function(u){setImmediate(function(){o||i.emit("error",u)})}),i.destroy=function(){n.unpipe(i),i.unref(),n.destroy()};var a=new De(r-t);return i.on("error",function(u){setImmediate(function(){o||a.emit("error",u)})}),a.destroy=function(){o=!0,i.unpipe(a),i.destroy()},n.pipe(i).pipe(a)};ie.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")};ie.prototype.read=function(e,t,r,s,n){var o=this.createReadStream({start:s,end:s+r}),i=new Ma,a=0;i._write=function(u,f,l){u.copy(e,t+a,0,u.length),a+=u.length,l()},i.on("finish",n),o.on("error",function(u){n(u)}),o.pipe(i)};ie.prototype.close=function(e){setImmediate(e)};mt.inherits(yt,ir);function yt(e){ir.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}yt.prototype._flush=function(e){this.unref(),e()};yt.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var Ua="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function lt(e,t,r,s){if(s)return e.toString("utf8",t,r);for(var n="",o=t;o<r;o++)n+=Ua[e[o]];return n}function we(e,t){var r=e.readUInt32LE(t),s=e.readUInt32LE(t+4);return s*4294967296+r}var W;typeof Buffer.allocUnsafe=="function"?W=function(e){return Buffer.allocUnsafe(e)}:W=function(e){return new Buffer(e)};function ht(e){if(e)throw e}});var on=x((wd,nn)=>{var D=Os()("extract-zip"),{createWriteStream:Na,promises:_e}=require("fs"),Da=Xt(),de=require("path"),{promisify:cr}=require("util"),Ba=require("stream"),$a=sn(),Wa=cr($a.open),Ga=cr(Ba.pipeline),ar=class{constructor(t,r){this.zipPath=t,this.opts=r}async extract(){return D("opening",this.zipPath,"with opts",this.opts),this.zipfile=await Wa(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((t,r)=>{this.zipfile.on("error",s=>{this.canceled=!0,r(s)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(D("zip extraction complete"),t())}),this.zipfile.on("entry",async s=>{if(this.canceled){D("skipping entry",s.fileName,{cancelled:this.canceled});return}if(D("zipfile entry",s.fileName),s.fileName.startsWith("__MACOSX/")){this.zipfile.readEntry();return}let n=de.dirname(de.join(this.opts.dir,s.fileName));try{await _e.mkdir(n,{recursive:!0});let o=await _e.realpath(n);if(de.relative(this.opts.dir,o).split(de.sep).includes(".."))throw new Error(`Out of bound path "${o}" found while processing file ${s.fileName}`);await this.extractEntry(s),D("finished processing",s.fileName),this.zipfile.readEntry()}catch(o){this.canceled=!0,this.zipfile.close(),r(o)}})})}async extractEntry(t){if(this.canceled){D("skipping entry extraction",t.fileName,{cancelled:this.canceled});return}this.opts.onEntry&&this.opts.onEntry(t,this.zipfile);let r=de.join(this.opts.dir,t.fileName),s=t.externalFileAttributes>>16&65535,n=61440,o=16384,i=40960,a=(s&n)===i,u=(s&n)===o;!u&&t.fileName.endsWith("/")&&(u=!0);let f=t.versionMadeBy>>8;u||(u=f===0&&t.externalFileAttributes===16),D("extracting entry",{filename:t.fileName,isDir:u,isSymlink:a});let l=this.getExtractedMode(s,u)&511,d=u?r:de.dirname(r),h={recursive:!0};if(u&&(h.mode=l),D("mkdir",{dir:d,...h}),await _e.mkdir(d,h),u)return;D("opening read stream",r);let y=await cr(this.zipfile.openReadStream.bind(this.zipfile))(t);if(a){let g=await Da(y);D("creating symlink",g,r),await _e.symlink(g,r)}else await Ga(y,Na(r,{mode:l}))}getExtractedMode(t,r){let s=t;return s===0&&(r?(this.opts.defaultDirMode&&(s=parseInt(this.opts.defaultDirMode,10)),s||(s=493)):(this.opts.defaultFileMode&&(s=parseInt(this.opts.defaultFileMode,10)),s||(s=420))),s}};nn.exports=async function(e,t){if(D("creating target directory",t.dir),!de.isAbsolute(t.dir))throw new Error("Target directory is expected to be absolute");return await _e.mkdir(t.dir,{recursive:!0}),t.dir=await _e.realpath(t.dir),new ar(e,t).extract()}});var Z=x((X,gt)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var an=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Va(e){return an.includes(e)}var Ja=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...an];function Ka(e){return Ja.includes(e)}var Ya=["null","undefined","string","number","bigint","boolean","symbol"];function Qa(e){return Ya.includes(e)}function xe(e){return t=>typeof t===e}var{toString:cn}=Object.prototype,Be=e=>{let t=cn.call(e).slice(8,-1);if(/HTML\w+Element/.test(t)&&c.domElement(e))return"HTMLElement";if(Ka(t))return t},S=e=>t=>Be(t)===e;function c(e){if(e===null)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(c.observable(e))return"Observable";if(c.array(e))return"Array";if(c.buffer(e))return"Buffer";let t=Be(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}c.undefined=xe("undefined");c.string=xe("string");var Xa=xe("number");c.number=e=>Xa(e)&&!c.nan(e);c.bigint=xe("bigint");c.function_=xe("function");c.null_=e=>e===null;c.class_=e=>c.function_(e)&&e.toString().startsWith("class ");c.boolean=e=>e===!0||e===!1;c.symbol=xe("symbol");c.numericString=e=>c.string(e)&&!c.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e));c.array=(e,t)=>Array.isArray(e)?c.function_(t)?e.every(t):!0:!1;c.buffer=e=>{var t,r,s,n;return(n=(s=(r=(t=e)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.isBuffer)===null||s===void 0?void 0:s.call(r,e))!==null&&n!==void 0?n:!1};c.blob=e=>S("Blob")(e);c.nullOrUndefined=e=>c.null_(e)||c.undefined(e);c.object=e=>!c.null_(e)&&(typeof e=="object"||c.function_(e));c.iterable=e=>{var t;return c.function_((t=e)===null||t===void 0?void 0:t[Symbol.iterator])};c.asyncIterable=e=>{var t;return c.function_((t=e)===null||t===void 0?void 0:t[Symbol.asyncIterator])};c.generator=e=>{var t,r;return c.iterable(e)&&c.function_((t=e)===null||t===void 0?void 0:t.next)&&c.function_((r=e)===null||r===void 0?void 0:r.throw)};c.asyncGenerator=e=>c.asyncIterable(e)&&c.function_(e.next)&&c.function_(e.throw);c.nativePromise=e=>S("Promise")(e);var Za=e=>{var t,r;return c.function_((t=e)===null||t===void 0?void 0:t.then)&&c.function_((r=e)===null||r===void 0?void 0:r.catch)};c.promise=e=>c.nativePromise(e)||Za(e);c.generatorFunction=S("GeneratorFunction");c.asyncGeneratorFunction=e=>Be(e)==="AsyncGeneratorFunction";c.asyncFunction=e=>Be(e)==="AsyncFunction";c.boundFunction=e=>c.function_(e)&&!e.hasOwnProperty("prototype");c.regExp=S("RegExp");c.date=S("Date");c.error=S("Error");c.map=e=>S("Map")(e);c.set=e=>S("Set")(e);c.weakMap=e=>S("WeakMap")(e);c.weakSet=e=>S("WeakSet")(e);c.int8Array=S("Int8Array");c.uint8Array=S("Uint8Array");c.uint8ClampedArray=S("Uint8ClampedArray");c.int16Array=S("Int16Array");c.uint16Array=S("Uint16Array");c.int32Array=S("Int32Array");c.uint32Array=S("Uint32Array");c.float32Array=S("Float32Array");c.float64Array=S("Float64Array");c.bigInt64Array=S("BigInt64Array");c.bigUint64Array=S("BigUint64Array");c.arrayBuffer=S("ArrayBuffer");c.sharedArrayBuffer=S("SharedArrayBuffer");c.dataView=S("DataView");c.enumCase=(e,t)=>Object.values(t).includes(e);c.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype;c.urlInstance=e=>S("URL")(e);c.urlString=e=>{if(!c.string(e))return!1;try{return new URL(e),!0}catch{return!1}};c.truthy=e=>Boolean(e);c.falsy=e=>!e;c.nan=e=>Number.isNaN(e);c.primitive=e=>c.null_(e)||Qa(typeof e);c.integer=e=>Number.isInteger(e);c.safeInteger=e=>Number.isSafeInteger(e);c.plainObject=e=>{if(cn.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.getPrototypeOf({})};c.typedArray=e=>Va(Be(e));var ec=e=>c.safeInteger(e)&&e>=0;c.arrayLike=e=>!c.nullOrUndefined(e)&&!c.function_(e)&&ec(e.length);c.inRange=(e,t)=>{if(c.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(c.array(t)&&t.length===2)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};var tc=1,rc=["innerHTML","ownerDocument","style","attributes","nodeValue"];c.domElement=e=>c.object(e)&&e.nodeType===tc&&c.string(e.nodeName)&&!c.plainObject(e)&&rc.every(t=>t in e);c.observable=e=>{var t,r,s,n;return e?e===((r=(t=e)[Symbol.observable])===null||r===void 0?void 0:r.call(t))||e===((n=(s=e)["@@observable"])===null||n===void 0?void 0:n.call(s)):!1};c.nodeStream=e=>c.object(e)&&c.function_(e.pipe)&&!c.observable(e);c.infinite=e=>e===1/0||e===-1/0;var un=e=>t=>c.integer(t)&&Math.abs(t%2)===e;c.evenInteger=un(0);c.oddInteger=un(1);c.emptyArray=e=>c.array(e)&&e.length===0;c.nonEmptyArray=e=>c.array(e)&&e.length>0;c.emptyString=e=>c.string(e)&&e.length===0;var sc=e=>c.string(e)&&!/\S/.test(e);c.emptyStringOrWhitespace=e=>c.emptyString(e)||sc(e);c.nonEmptyString=e=>c.string(e)&&e.length>0;c.nonEmptyStringAndNotWhitespace=e=>c.string(e)&&!c.emptyStringOrWhitespace(e);c.emptyObject=e=>c.object(e)&&!c.map(e)&&!c.set(e)&&Object.keys(e).length===0;c.nonEmptyObject=e=>c.object(e)&&!c.map(e)&&!c.set(e)&&Object.keys(e).length>0;c.emptySet=e=>c.set(e)&&e.size===0;c.nonEmptySet=e=>c.set(e)&&e.size>0;c.emptyMap=e=>c.map(e)&&e.size===0;c.nonEmptyMap=e=>c.map(e)&&e.size>0;c.propertyKey=e=>c.any([c.string,c.number,c.symbol],e);c.formData=e=>S("FormData")(e);c.urlSearchParams=e=>S("URLSearchParams")(e);var fn=(e,t,r)=>{if(!c.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(r.length===0)throw new TypeError("Invalid number of values");return e.call(r,t)};c.any=(e,...t)=>(c.array(e)?e:[e]).some(s=>fn(Array.prototype.some,s,t));c.all=(e,...t)=>fn(Array.prototype.every,e,t);var _=(e,t,r,s={})=>{if(!e){let{multipleValues:n}=s,o=n?`received values of types ${[...new Set(r.map(i=>`\`${c(i)}\``))].join(", ")}`:`received value of type \`${c(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${o}.`)}};X.assert={undefined:e=>_(c.undefined(e),"undefined",e),string:e=>_(c.string(e),"string",e),number:e=>_(c.number(e),"number",e),bigint:e=>_(c.bigint(e),"bigint",e),function_:e=>_(c.function_(e),"Function",e),null_:e=>_(c.null_(e),"null",e),class_:e=>_(c.class_(e),"Class",e),boolean:e=>_(c.boolean(e),"boolean",e),symbol:e=>_(c.symbol(e),"symbol",e),numericString:e=>_(c.numericString(e),"string with a number",e),array:(e,t)=>{_(c.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>_(c.buffer(e),"Buffer",e),blob:e=>_(c.blob(e),"Blob",e),nullOrUndefined:e=>_(c.nullOrUndefined(e),"null or undefined",e),object:e=>_(c.object(e),"Object",e),iterable:e=>_(c.iterable(e),"Iterable",e),asyncIterable:e=>_(c.asyncIterable(e),"AsyncIterable",e),generator:e=>_(c.generator(e),"Generator",e),asyncGenerator:e=>_(c.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>_(c.nativePromise(e),"native Promise",e),promise:e=>_(c.promise(e),"Promise",e),generatorFunction:e=>_(c.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>_(c.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>_(c.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>_(c.boundFunction(e),"Function",e),regExp:e=>_(c.regExp(e),"RegExp",e),date:e=>_(c.date(e),"Date",e),error:e=>_(c.error(e),"Error",e),map:e=>_(c.map(e),"Map",e),set:e=>_(c.set(e),"Set",e),weakMap:e=>_(c.weakMap(e),"WeakMap",e),weakSet:e=>_(c.weakSet(e),"WeakSet",e),int8Array:e=>_(c.int8Array(e),"Int8Array",e),uint8Array:e=>_(c.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>_(c.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>_(c.int16Array(e),"Int16Array",e),uint16Array:e=>_(c.uint16Array(e),"Uint16Array",e),int32Array:e=>_(c.int32Array(e),"Int32Array",e),uint32Array:e=>_(c.uint32Array(e),"Uint32Array",e),float32Array:e=>_(c.float32Array(e),"Float32Array",e),float64Array:e=>_(c.float64Array(e),"Float64Array",e),bigInt64Array:e=>_(c.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>_(c.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>_(c.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>_(c.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>_(c.dataView(e),"DataView",e),enumCase:(e,t)=>_(c.enumCase(e,t),"EnumCase",e),urlInstance:e=>_(c.urlInstance(e),"URL",e),urlString:e=>_(c.urlString(e),"string with a URL",e),truthy:e=>_(c.truthy(e),"truthy",e),falsy:e=>_(c.falsy(e),"falsy",e),nan:e=>_(c.nan(e),"NaN",e),primitive:e=>_(c.primitive(e),"primitive",e),integer:e=>_(c.integer(e),"integer",e),safeInteger:e=>_(c.safeInteger(e),"integer",e),plainObject:e=>_(c.plainObject(e),"plain object",e),typedArray:e=>_(c.typedArray(e),"TypedArray",e),arrayLike:e=>_(c.arrayLike(e),"array-like",e),domElement:e=>_(c.domElement(e),"HTMLElement",e),observable:e=>_(c.observable(e),"Observable",e),nodeStream:e=>_(c.nodeStream(e),"Node.js Stream",e),infinite:e=>_(c.infinite(e),"infinite number",e),emptyArray:e=>_(c.emptyArray(e),"empty array",e),nonEmptyArray:e=>_(c.nonEmptyArray(e),"non-empty array",e),emptyString:e=>_(c.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>_(c.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>_(c.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>_(c.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>_(c.emptyObject(e),"empty object",e),nonEmptyObject:e=>_(c.nonEmptyObject(e),"non-empty object",e),emptySet:e=>_(c.emptySet(e),"empty set",e),nonEmptySet:e=>_(c.nonEmptySet(e),"non-empty set",e),emptyMap:e=>_(c.emptyMap(e),"empty map",e),nonEmptyMap:e=>_(c.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>_(c.propertyKey(e),"PropertyKey",e),formData:e=>_(c.formData(e),"FormData",e),urlSearchParams:e=>_(c.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>_(c.evenInteger(e),"even integer",e),oddInteger:e=>_(c.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>_(c.directInstanceOf(e,t),"T",e),inRange:(e,t)=>_(c.inRange(e,t),"in range",e),any:(e,...t)=>_(c.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>_(c.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(c,{class:{value:c.class_},function:{value:c.function_},null:{value:c.null_}});Object.defineProperties(X.assert,{class:{value:X.assert.class_},function:{value:X.assert.function_},null:{value:X.assert.null_}});X.default=c;gt.exports=c;gt.exports.default=c;gt.exports.assert=X.assert});var dn=x((_d,ur)=>{"use strict";var bt=class extends Error{constructor(t){super(t||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},ve=class{static fn(t){return(...r)=>new ve((s,n,o)=>{r.push(o),t(...r).then(s,n)})}constructor(t){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,s)=>{this._reject=s;let n=a=>{(!this._isCanceled||!i.shouldReject)&&(this._isPending=!1,r(a))},o=a=>{this._isPending=!1,s(a)},i=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(i,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),t(n,o,i)})}then(t,r){return this._promise.then(t,r)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(t){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new bt(t))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(ve.prototype,Promise.prototype);ur.exports=ve;ur.exports.CancelError=bt});var ln=x((dr,lr)=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});function nc(e){return e.encrypted}var fr=(e,t)=>{let r;typeof t=="function"?r={connect:t}:r=t;let s=typeof r.connect=="function",n=typeof r.secureConnect=="function",o=typeof r.close=="function",i=()=>{s&&r.connect(),nc(e)&&n&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),o&&e.once("close",r.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&o&&r.close(e._hadError)};dr.default=fr;lr.exports=fr;lr.exports.default=fr});var hn=x((mr,pr)=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});var ic=ln(),oc=require("util"),ac=Number(process.versions.node.split(".")[0]),hr=e=>{if(e.timings)return e.timings;let t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;let r=a=>{let u=a.emit.bind(a);a.emit=(f,...l)=>(f==="error"&&(t.error=Date.now(),t.phases.total=t.error-t.start,a.emit=u),u(f,...l))};r(e);let s=()=>{t.abort=Date.now(),(!t.response||ac>=13)&&(t.phases.total=Date.now()-t.start)};e.prependOnceListener("abort",s);let n=a=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,oc.types.isProxy(a))return;let u=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};a.prependOnceListener("lookup",u),ic.default(a,{connect:()=>{t.connect=Date.now(),t.lookup===void 0&&(a.removeListener("lookup",u),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?n(e.socket):e.prependOnceListener("socket",n);let o=()=>{var a;t.upload=Date.now(),t.phases.request=t.upload-((a=t.secureConnect)!==null&&a!==void 0?a:t.connect)};return(()=>typeof e.writableFinished=="boolean"?e.writableFinished:e.finished&&e.outputSize===0&&(!e.socket||e.socket.writableLength===0))()?o():e.prependOnceListener("finish",o),e.prependOnceListener("response",a=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,a.timings=t,r(a),a.prependOnceListener("end",()=>{t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start}),a.prependOnceListener("aborted",s)}),t};mr.default=hr;pr.exports=hr;pr.exports.default=hr});var _n=x((xd,br)=>{"use strict";var{V4MAPPED:cc,ADDRCONFIG:uc,ALL:wn,promises:{Resolver:mn},lookup:fc}=require("dns"),{promisify:yr}=require("util"),dc=require("os"),Ee=Symbol("cacheableLookupCreateConnection"),gr=Symbol("cacheableLookupInstance"),pn=Symbol("expires"),lc=typeof wn=="number",yn=e=>{if(!(e&&typeof e.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},hc=e=>{for(let t of e)t.family!==6&&(t.address=`::ffff:${t.address}`,t.family=6)},gn=()=>{let e=!1,t=!1;for(let r of Object.values(dc.networkInterfaces()))for(let s of r)if(!s.internal&&(s.family==="IPv6"?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},mc=e=>Symbol.iterator in e,bn={ttl:!0},pc={all:!0},wt=class{constructor({cache:t=new Map,maxTtl:r=1/0,fallbackDuration:s=3600,errorTtl:n=.15,resolver:o=new mn,lookup:i=fc}={}){if(this.maxTtl=r,this.errorTtl=n,this._cache=t,this._resolver=o,this._dnsLookup=yr(i),this._resolver instanceof mn?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=yr(this._resolver.resolve4.bind(this._resolver)),this._resolve6=yr(this._resolver.resolve6.bind(this._resolver))),this._iface=gn(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,s<1)this._fallback=!1;else{this._fallback=!0;let a=setInterval(()=>{this._hostnamesToFallback.clear()},s*1e3);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(t){this.clear(),this._resolver.setServers(t)}get servers(){return this._resolver.getServers()}lookup(t,r,s){if(typeof r=="function"?(s=r,r={}):typeof r=="number"&&(r={family:r}),!s)throw new Error("Callback must be a function.");this.lookupAsync(t,r).then(n=>{r.all?s(null,n):s(null,n.address,n.family,n.expires,n.ttl)},s)}async lookupAsync(t,r={}){typeof r=="number"&&(r={family:r});let s=await this.query(t);if(r.family===6){let n=s.filter(o=>o.family===6);r.hints&cc&&(lc&&r.hints&wn||n.length===0)?hc(s):s=n}else r.family===4&&(s=s.filter(n=>n.family===4));if(r.hints&uc){let{_iface:n}=this;s=s.filter(o=>o.family===6?n.has6:n.has4)}if(s.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${t}`);throw n.code="ENOTFOUND",n.hostname=t,n}return r.all?s:s[0]}async query(t){let r=await this._cache.get(t);if(!r){let s=this._pending[t];if(s)r=await s;else{let n=this.queryAndCache(t);this._pending[t]=n;try{r=await n}finally{delete this._pending[t]}}}return r=r.map(s=>({...s})),r}async _resolve(t){let r=async f=>{try{return await f}catch(l){if(l.code==="ENODATA"||l.code==="ENOTFOUND")return[];throw l}},[s,n]=await Promise.all([this._resolve4(t,bn),this._resolve6(t,bn)].map(f=>r(f))),o=0,i=0,a=0,u=Date.now();for(let f of s)f.family=4,f.expires=u+f.ttl*1e3,o=Math.max(o,f.ttl);for(let f of n)f.family=6,f.expires=u+f.ttl*1e3,i=Math.max(i,f.ttl);return s.length>0?n.length>0?a=Math.min(o,i):a=o:a=i,{entries:[...s,...n],cacheTtl:a}}async _lookup(t){try{return{entries:await this._dnsLookup(t,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(t,r,s){if(this.maxTtl>0&&s>0){s=Math.min(s,this.maxTtl)*1e3,r[pn]=Date.now()+s;try{await this._cache.set(t,r,s)}catch(n){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=n,o}}mc(this._cache)&&this._tick(s)}}async queryAndCache(t){if(this._hostnamesToFallback.has(t))return this._dnsLookup(t,pc);let r=await this._resolve(t);r.entries.length===0&&this._fallback&&(r=await this._lookup(t),r.entries.length!==0&&this._hostnamesToFallback.add(t));let s=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(t,r.entries,s),r.entries}_tick(t){let r=this._nextRemovalTime;(!r||t<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=t,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let s=1/0,n=Date.now();for(let[o,i]of this._cache){let a=i[pn];n>=a?this._cache.delete(o):a<s&&(s=a)}s!==1/0&&this._tick(s-n)},t),this._removalTimeout.unref&&this._removalTimeout.unref())}install(t){if(yn(t),Ee in t)throw new Error("CacheableLookup has been already installed");t[Ee]=t.createConnection,t[gr]=this,t.createConnection=(r,s)=>("lookup"in r||(r.lookup=this.lookup),t[Ee](r,s))}uninstall(t){if(yn(t),t[Ee]){if(t[gr]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");t.createConnection=t[Ee],delete t[Ee],delete t[gr]}}updateInterfaceInfo(){let{_iface:t}=this;this._iface=gn(),(t.has4&&!this._iface.has4||t.has6&&!this._iface.has6)&&this._cache.clear()}clear(t){if(t){this._cache.delete(t);return}this._cache.clear()}};br.exports=wt;br.exports.default=wt});var En=x((vd,vn)=>{"use strict";var yc="text/plain",gc="us-ascii",xn=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),bc=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:s,data:n,hash:o}=r.groups,i=s.split(";");o=t?"":o;let a=!1;i[i.length-1]==="base64"&&(i.pop(),a=!0);let u=(i.shift()||"").toLowerCase(),l=[...i.map(d=>{let[h,y=""]=d.split("=").map(g=>g.trim());return h==="charset"&&(y=y.toLowerCase(),y===gc)?"":`${h}${y?`=${y}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length!==0||u&&u!==yc)&&l.unshift(u),`data:${l.join(";")},${a?n.trim():n}${o?`#${o}`:""}`},wc=(e,t)=>{if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return bc(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),t.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname&&(n.pathname=n.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let i=n.pathname.split("/"),a=i[i.length-1];xn(a,t.removeDirectoryIndex)&&(i=i.slice(0,i.length-1),n.pathname=i.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let i of[...n.searchParams.keys()])xn(i,t.removeQueryParameters)&&n.searchParams.delete(i);t.removeQueryParameters===!0&&(n.search=""),t.sortQueryParameters&&n.searchParams.sort(),t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let o=e;return e=n.toString(),!t.removeSingleSlash&&n.pathname==="/"&&!o.endsWith("/")&&n.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e};vn.exports=wc});var Sn=x((Cd,Cn)=>{"use strict";var _c=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),xc=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),vc=new Set([500,502,503,504]),Ec={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Cc={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function le(e){let t=parseInt(e,10);return isFinite(t)?t:0}function Sc(e){return e?vc.has(e.status):!0}function wr(e){let t={};if(!e)return t;let r=e.trim().split(/,/);for(let s of r){let[n,o]=s.split(/=/,2);t[n.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return t}function Tc(e){let t=[];for(let r in e){let s=e[r];t.push(s===!0?r:r+"="+s)}if(t.length)return t.join(", ")}Cn.exports=class{constructor(t,r,{shared:s,cacheHeuristic:n,immutableMinTimeToLive:o,ignoreCargoCult:i,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(t),this._responseTime=this.now(),this._isShared=s!==!1,this._cacheHeuristic=n!==void 0?n:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=wr(r.headers["cache-control"]),this._method="method"in t?t.method:"GET",this._url=t.url,this._host=t.headers.host,this._noAuthorization=!t.headers.authorization,this._reqHeaders=r.headers.vary?t.headers:null,this._reqcc=wr(t.headers["cache-control"]),i&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Tc(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&xc.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||_c.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(t){if(!t||!t.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(t){this._assertRequestHasHeaders(t);let r=wr(t.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(t.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(t,!1)}_requestMatches(t,r){return(!this._url||this._url===t.url)&&this._host===t.headers.host&&(!t.method||this._method===t.method||r&&t.method==="HEAD")&&this._varyMatches(t)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(t){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let s of r)if(t.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(t){let r={};for(let s in t)Ec[s]||(r[s]=t[s]);if(t.connection){let s=t.connection.trim().split(/\s*,\s*/);for(let n of s)delete r[n]}if(r.warning){let s=r.warning.split(/,/).filter(n=>!/^\s*1[0-9][0-9]/.test(n));s.length?r.warning=s.join(",").trim():delete r.warning}return r}responseHeaders(){let t=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(t.warning=(t.warning?`${t.warning}, `:"")+'113 - "rfc7234 5.5.4"'),t.age=`${Math.round(r)}`,t.date=new Date(this.now()).toUTCString(),t}date(){let t=Date.parse(this._resHeaders.date);return isFinite(t)?t:this._responseTime}age(){let t=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return t+r}_ageValue(){return le(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return le(this._rescc["s-maxage"])}if(this._rescc["max-age"])return le(this._rescc["max-age"]);let t=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<r?0:Math.max(t,(s-r)/1e3)}if(this._resHeaders["last-modified"]){let s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&r>s)return Math.max(t,(r-s)/1e3*this._cacheHeuristic)}return t}timeToLive(){let t=this.maxAge()-this.age(),r=t+le(this._rescc["stale-if-error"]),s=t+le(this._rescc["stale-while-revalidate"]);return Math.max(0,t,r,s)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+le(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+le(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(t){return new this(void 0,void 0,{_fromObject:t})}_fromObject(t){if(this._responseTime)throw Error("Reinitialized");if(!t||t.v!==1)throw Error("Invalid serialization");this._responseTime=t.t,this._isShared=t.sh,this._cacheHeuristic=t.ch,this._immutableMinTtl=t.imm!==void 0?t.imm:24*3600*1e3,this._status=t.st,this._resHeaders=t.resh,this._rescc=t.rescc,this._method=t.m,this._url=t.u,this._host=t.h,this._noAuthorization=t.a,this._reqHeaders=t.reqh,this._reqcc=t.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(t){this._assertRequestHasHeaders(t);let r=this._copyWithoutHopByHopHeaders(t.headers);if(delete r["if-range"],!this._requestMatches(t,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let n=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));n.length?r["if-none-match"]=n.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(t,r){if(this._assertRequestHasHeaders(t),this._useStaleIfError()&&Sc(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let s=!1;if(r.status!==void 0&&r.status!=304?s=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(s=!0),!s)return{policy:new this.constructor(t,r),modified:r.status!=304,matches:!1};let n={};for(let i in this._resHeaders)n[i]=i in r.headers&&!Cc[i]?r.headers[i]:this._resHeaders[i];let o=Object.assign({},r,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(t,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var _t=x((Sd,Tn)=>{"use strict";Tn.exports=e=>{let t={};for(let[r,s]of Object.entries(e))t[r.toLowerCase()]=s;return t}});var On=x((Td,Rn)=>{"use strict";var Rc=require("stream").Readable,Oc=_t(),_r=class extends Rc{constructor(t,r,s,n){if(typeof t!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super(),this.statusCode=t,this.headers=Oc(r),this.body=s,this.url=n}_read(){this.push(this.body),this.push(null)}};Rn.exports=_r});var An=x((Rd,Pn)=>{"use strict";var Pc=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];Pn.exports=(e,t)=>{let r=new Set(Object.keys(e).concat(Pc));for(let s of r)s in t||(t[s]=typeof e[s]=="function"?e[s].bind(e):e[s])}});var qn=x((Od,kn)=>{"use strict";var Ac=require("stream").PassThrough,kc=An(),qc=e=>{if(!(e&&e.pipe))throw new TypeError("Parameter `response` must be a response stream.");let t=new Ac;return kc(e,t),e.pipe(t)};kn.exports=qc});var In=x(xr=>{xr.stringify=function e(t){if(typeof t>"u")return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&typeof t=="object"){var r="",s=Array.isArray(t);r=s?"[":"{";var n=!0;for(var o in t){var i=typeof t[o]=="function"||!s&&typeof t[o]>"u";Object.hasOwnProperty.call(t,o)&&!i&&(n||(r+=","),n=!1,s?t[o]==null?r+="null":r+=e(t[o]):t[o]!==void 0&&(r+=e(o)+":"+e(t[o])))}return r+=s?"]":"}",r}else return typeof t=="string"?JSON.stringify(/^:/.test(t)?":"+t:t):typeof t>"u"?"null":JSON.stringify(t)};xr.parse=function(e){return JSON.parse(e,function(t,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var Mn=x((Ad,jn)=>{"use strict";var Ic=require("events"),Ln=In(),Lc=e=>{let t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){let r=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(require(t[r]))(e)}return new Map},Fn=["sqlite","postgres","mysql","mongo","redis","tiered"],vr=class extends Ic{constructor(t,{emitErrors:r=!0,...s}={}){if(super(),this.opts={namespace:"keyv",serialize:Ln.stringify,deserialize:Ln.parse,...typeof t=="string"?{uri:t}:t,...s},!this.opts.store){let o={...this.opts};this.opts.store=Lc(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let n=o=>async function*(){for await(let[i,a]of typeof o=="function"?o(this.opts.store.namespace):o){let u=this.opts.deserialize(a);if(!(this.opts.store.namespace&&!i.includes(this.opts.store.namespace))){if(typeof u.expires=="number"&&Date.now()>u.expires){this.delete(i);continue}yield[this._getKeyUnprefix(i),u.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=n(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=n(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return Fn.includes(this.opts.store.opts.dialect)||Fn.findIndex(t=>this.opts.store.opts.url.includes(t))>=0}_getKeyPrefix(t){return`${this.opts.namespace}:${t}`}_getKeyPrefixArray(t){return t.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(t){return t.split(":").splice(1).join(":")}get(t,r){let{store:s}=this.opts,n=Array.isArray(t),o=n?this._getKeyPrefixArray(t):this._getKeyPrefix(t);if(n&&s.getMany===void 0){let i=[];for(let a of o)i.push(Promise.resolve().then(()=>s.get(a)).then(u=>typeof u=="string"?this.opts.deserialize(u):this.opts.compression?this.opts.deserialize(u):u).then(u=>{if(u!=null)return typeof u.expires=="number"&&Date.now()>u.expires?this.delete(a).then(()=>{}):r&&r.raw?u:u.value}));return Promise.allSettled(i).then(a=>{let u=[];for(let f of a)u.push(f.value);return u})}return Promise.resolve().then(()=>n?s.getMany(o):s.get(o)).then(i=>typeof i=="string"?this.opts.deserialize(i):this.opts.compression?this.opts.deserialize(i):i).then(i=>{if(i!=null){if(n){let a=[];for(let u of i){if(typeof u=="string"&&(u=this.opts.deserialize(u)),u==null){a.push(void 0);continue}typeof u.expires=="number"&&Date.now()>u.expires?(this.delete(t).then(()=>{}),a.push(void 0)):a.push(r&&r.raw?u:u.value)}return a}return typeof i.expires=="number"&&Date.now()>i.expires?this.delete(t).then(()=>{}):r&&r.raw?i:i.value}})}set(t,r,s){let n=this._getKeyPrefix(t);typeof s>"u"&&(s=this.opts.ttl),s===0&&(s=void 0);let{store:o}=this.opts;return Promise.resolve().then(()=>{let i=typeof s=="number"?Date.now()+s:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:i},this.opts.serialize(r)}).then(i=>o.set(n,i,s)).then(()=>!0)}delete(t){let{store:r}=this.opts;if(Array.isArray(t)){let n=this._getKeyPrefixArray(t);if(r.deleteMany===void 0){let o=[];for(let i of n)o.push(r.delete(i));return Promise.allSettled(o).then(i=>i.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(n))}let s=this._getKeyPrefix(t);return Promise.resolve().then(()=>r.delete(s))}clear(){let{store:t}=this.opts;return Promise.resolve().then(()=>t.clear())}has(t){let r=this._getKeyPrefix(t),{store:s}=this.opts;return Promise.resolve().then(async()=>typeof s.has=="function"?s.has(r):await s.get(r)!==void 0)}disconnect(){let{store:t}=this.opts;if(typeof t.disconnect=="function")return t.disconnect()}};jn.exports=vr});var Un=x((kd,Hn)=>{"use strict";var Fc=require("events"),xt=require("url"),jc=En(),Mc=Xt(),Er=Sn(),zn=On(),zc=_t(),Hc=qn(),Uc=Mn(),B=class{constructor(t,r){if(typeof t!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new Uc({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(t)}createCacheableRequest(t){return(r,s)=>{let n;if(typeof r=="string")n=Cr(xt.parse(r)),r={};else if(r instanceof xt.URL)n=Cr(xt.parse(r.toString())),r={};else{let[d,...h]=(r.path||"").split("?"),y=h.length>0?`?${h.join("?")}`:"";n=Cr({...r,pathname:d,search:y})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...Nc(n)},r.headers=zc(r.headers);let o=new Fc,i=jc(xt.format(n),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${i}`,u=!1,f=!1,l=d=>{f=!0;let h=!1,y,g=new Promise(m=>{y=()=>{h||(h=!0,m())}}),b=m=>{if(u&&!d.forceRefresh){m.status=m.statusCode;let v=Er.fromObject(u.cachePolicy).revalidatedPolicy(d,m);if(!v.modified){let C=v.policy.responseHeaders();m=new zn(u.statusCode,C,u.body,u.url),m.cachePolicy=v.policy,m.fromCache=!0}}m.fromCache||(m.cachePolicy=new Er(d,m,d),m.fromCache=!1);let w;d.cache&&m.cachePolicy.storable()?(w=Hc(m),(async()=>{try{let v=Mc.buffer(m);if(await Promise.race([g,new Promise(J=>m.once("end",J))]),h)return;let C=await v,O={cachePolicy:m.cachePolicy.toObject(),url:m.url,statusCode:m.fromCache?u.statusCode:m.statusCode,body:C},L=d.strictTtl?m.cachePolicy.timeToLive():void 0;d.maxTtl&&(L=L?Math.min(L,d.maxTtl):d.maxTtl),await this.cache.set(a,O,L)}catch(v){o.emit("error",new B.CacheError(v))}})()):d.cache&&u&&(async()=>{try{await this.cache.delete(a)}catch(v){o.emit("error",new B.CacheError(v))}})(),o.emit("response",w||m),typeof s=="function"&&s(w||m)};try{let m=t(d,b);m.once("error",y),m.once("abort",y),o.emit("request",m)}catch(m){o.emit("error",new B.RequestError(m))}};return(async()=>{let d=async y=>{await Promise.resolve();let g=y.cache?await this.cache.get(a):void 0;if(typeof g>"u")return l(y);let b=Er.fromObject(g.cachePolicy);if(b.satisfiesWithoutRevalidation(y)&&!y.forceRefresh){let m=b.responseHeaders(),w=new zn(g.statusCode,m,g.body,g.url);w.cachePolicy=b,w.fromCache=!0,o.emit("response",w),typeof s=="function"&&s(w)}else u=g,y.headers=b.revalidationHeaders(y),l(y)},h=y=>o.emit("error",new B.CacheError(y));this.cache.once("error",h),o.on("response",()=>this.cache.removeListener("error",h));try{await d(r)}catch(y){r.automaticFailover&&!f&&l(r),o.emit("error",new B.CacheError(y))}})(),o}}};function Nc(e){let t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t}function Cr(e){return{protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}}B.RequestError=class extends Error{constructor(e){super(e.message),this.name="RequestError",Object.assign(this,e)}};B.CacheError=class extends Error{constructor(e){super(e.message),this.name="CacheError",Object.assign(this,e)}};Hn.exports=B});var Dn=x((Ld,Nn)=>{"use strict";var Dc=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];Nn.exports=(e,t)=>{if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(e).concat(Dc)),s={};for(let n of r)n in t||(s[n]={get(){let o=e[n];return typeof o=="function"?o.bind(e):o},set(o){e[n]=o},enumerable:!0,configurable:!1});return Object.defineProperties(t,s),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")}),t}});var $n=x((Fd,Bn)=>{"use strict";var{Transform:Bc,PassThrough:$c}=require("stream"),Sr=require("zlib"),Wc=Dn();Bn.exports=e=>{let t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;let r=t==="br";if(r&&typeof Sr.createBrotliDecompress!="function")return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let s=!0,n=new Bc({transform(a,u,f){s=!1,f(null,a)},flush(a){a()}}),o=new $c({autoDestroy:!1,destroy(a,u){e.destroy(),u(a)}}),i=r?Sr.createBrotliDecompress():Sr.createUnzip();return i.once("error",a=>{if(s&&!e.readable){o.end();return}o.destroy(a)}),Wc(e,o),e.pipe(n).pipe(i).pipe(o),o}});var Rr=x((jd,Wn)=>{"use strict";var Tr=class{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,r){if(this.cache.set(t,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[s,n]of this.oldCache.entries())this.onEviction(s,n);this.oldCache=this.cache,this.cache=new Map}}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){let r=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,r),r}}set(t,r){return this.cache.has(t)?this.cache.set(t,r):this._set(t,r),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){let r=this.cache.delete(t);return r&&this._size--,this.oldCache.delete(t)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache)yield t;for(let t of this.oldCache){let[r]=t;this.cache.has(r)||(yield t)}}get size(){let t=0;for(let r of this.oldCache.keys())this.cache.has(r)||t++;return Math.min(this._size+t,this.maxSize)}};Wn.exports=Tr});var Pr=x((Md,Kn)=>{"use strict";var Gc=require("events"),Vc=require("tls"),Jc=require("http2"),Kc=Rr(),I=Symbol("currentStreamsCount"),Gn=Symbol("request"),z=Symbol("cachedOriginSet"),Ce=Symbol("gracefullyClosing"),Yc=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],Qc=(e,t,r)=>{let s=0,n=e.length;for(;s<n;){let o=s+n>>>1;r(e[o],t)?s=o+1:n=o}return s},Xc=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,Or=(e,t)=>{for(let r of e)r[z].length<t[z].length&&r[z].every(s=>t[z].includes(s))&&r[I]+t[I]<=t.remoteSettings.maxConcurrentStreams&&Jn(r)},Zc=(e,t)=>{for(let r of e)t[z].length<r[z].length&&t[z].every(s=>r[z].includes(s))&&t[I]+r[I]<=r.remoteSettings.maxConcurrentStreams&&Jn(t)},Vn=({agent:e,isFree:t})=>{let r={};for(let s in e.sessions){let o=e.sessions[s].filter(i=>{let a=i[V.kCurrentStreamsCount]<i.remoteSettings.maxConcurrentStreams;return t?a:!a});o.length!==0&&(r[s]=o)}return r},Jn=e=>{e[Ce]=!0,e[I]===0&&e.close()},V=class extends Gc{constructor({timeout:t=6e4,maxSessions:r=1/0,maxFreeSessions:s=10,maxCachedTlsSessions:n=100}={}){super(),this.sessions={},this.queue={},this.timeout=t,this.maxSessions=r,this.maxFreeSessions=s,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new Kc({maxSize:n})}static normalizeOrigin(t,r){return typeof t=="string"&&(t=new URL(t)),r&&t.hostname!==r&&(t.hostname=r),t.origin}normalizeOptions(t){let r="";if(t)for(let s of Yc)t[s]&&(r+=`:${t[s]}`);return r}_tryToCreateNewSession(t,r){if(!(t in this.queue)||!(r in this.queue[t]))return;let s=this.queue[t][r];this._sessionsCount<this.maxSessions&&!s.completed&&(s.completed=!0,s())}getSession(t,r,s){return new Promise((n,o)=>{Array.isArray(s)?(s=[...s],n()):s=[{resolve:n,reject:o}];let i=this.normalizeOptions(r),a=V.normalizeOrigin(t,r&&r.servername);if(a===void 0){for(let{reject:l}of s)l(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(i in this.sessions){let l=this.sessions[i],d=-1,h=-1,y;for(let g of l){let b=g.remoteSettings.maxConcurrentStreams;if(b<d)break;if(g[z].includes(a)){let m=g[I];if(m>=b||g[Ce]||g.destroyed)continue;y||(d=b),m>h&&(y=g,h=m)}}if(y){if(s.length!==1){for(let{reject:g}of s){let b=new Error(`Expected the length of listeners to be 1, got ${s.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);g(b)}return}s[0].resolve(y);return}}if(i in this.queue){if(a in this.queue[i]){this.queue[i][a].listeners.push(...s),this._tryToCreateNewSession(i,a);return}}else this.queue[i]={};let u=()=>{i in this.queue&&this.queue[i][a]===f&&(delete this.queue[i][a],Object.keys(this.queue[i]).length===0&&delete this.queue[i])},f=()=>{let l=`${a}:${i}`,d=!1;try{let h=Jc.connect(t,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(l),...r});h[I]=0,h[Ce]=!1;let y=()=>h[I]<h.remoteSettings.maxConcurrentStreams,g=!0;h.socket.once("session",m=>{this.tlsSessionCache.set(l,m)}),h.once("error",m=>{for(let{reject:w}of s)w(m);this.tlsSessionCache.delete(l)}),h.setTimeout(this.timeout,()=>{h.destroy()}),h.once("close",()=>{if(d){g&&this._freeSessionsCount--,this._sessionsCount--;let m=this.sessions[i];m.splice(m.indexOf(h),1),m.length===0&&delete this.sessions[i]}else{let m=new Error("Session closed without receiving a SETTINGS frame");m.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:w}of s)w(m);u()}this._tryToCreateNewSession(i,a)});let b=()=>{if(!(!(i in this.queue)||!y())){for(let m of h[z])if(m in this.queue[i]){let{listeners:w}=this.queue[i][m];for(;w.length!==0&&y();)w.shift().resolve(h);let v=this.queue[i];if(v[m].listeners.length===0&&(delete v[m],Object.keys(v).length===0)){delete this.queue[i];break}if(!y())break}}};h.on("origin",()=>{h[z]=h.originSet,y()&&(b(),Or(this.sessions[i],h))}),h.once("remoteSettings",()=>{if(h.ref(),h.unref(),this._sessionsCount++,f.destroyed){let m=new Error("Agent has been destroyed");for(let w of s)w.reject(m);h.destroy();return}h[z]=h.originSet;{let m=this.sessions;if(i in m){let w=m[i];w.splice(Qc(w,h,Xc),0,h)}else m[i]=[h]}this._freeSessionsCount+=1,d=!0,this.emit("session",h),b(),u(),h[I]===0&&this._freeSessionsCount>this.maxFreeSessions&&h.close(),s.length!==0&&(this.getSession(a,r,s),s.length=0),h.on("remoteSettings",()=>{b(),Or(this.sessions[i],h)})}),h[Gn]=h.request,h.request=(m,w)=>{if(h[Ce])throw new Error("The session is gracefully closing. No new streams are allowed.");let v=h[Gn](m,w);return h.ref(),++h[I],h[I]===h.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,v.once("close",()=>{if(g=y(),--h[I],!h.destroyed&&!h.closed&&(Zc(this.sessions[i],h),y()&&!h.closed)){g||(this._freeSessionsCount++,g=!0);let C=h[I]===0;C&&h.unref(),C&&(this._freeSessionsCount>this.maxFreeSessions||h[Ce])?h.close():(Or(this.sessions[i],h),b())}}),v}}catch(h){for(let y of s)y.reject(h);u()}};f.listeners=s,f.completed=!1,f.destroyed=!1,this.queue[i][a]=f,this._tryToCreateNewSession(i,a)})}request(t,r,s,n){return new Promise((o,i)=>{this.getSession(t,r,[{reject:i,resolve:a=>{try{o(a.request(s,n))}catch(u){i(u)}}}])})}createConnection(t,r){return V.connect(t,r)}static connect(t,r){r.ALPNProtocols=["h2"];let s=t.port||443,n=t.hostname||t.host;return typeof r.servername>"u"&&(r.servername=n),Vc.connect(s,n,r)}closeFreeSessions(){for(let t of Object.values(this.sessions))for(let r of t)r[I]===0&&r.close()}destroy(t){for(let r of Object.values(this.sessions))for(let s of r)s.destroy(t);for(let r of Object.values(this.queue))for(let s of Object.values(r))s.destroyed=!0;this.queue={}}get freeSessions(){return Vn({agent:this,isFree:!0})}get busySessions(){return Vn({agent:this,isFree:!1})}};V.kCurrentStreamsCount=I;V.kGracefullyClosing=Ce;Kn.exports={Agent:V,globalAgent:new V}});var kr=x((zd,Yn)=>{"use strict";var{Readable:eu}=require("stream"),Ar=class extends eu{constructor(t,r){super({highWaterMark:r,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=t,this.connection=t,this._dumped=!1}_destroy(t){this.req._request.destroy(t)}setTimeout(t,r){return this.req.setTimeout(t,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};Yn.exports=Ar});var qr=x((Hd,Qn)=>{"use strict";Qn.exports=e=>{let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return typeof e.port=="string"&&e.port.length!==0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}});var Zn=x((Ud,Xn)=>{"use strict";Xn.exports=(e,t,r)=>{for(let s of r)e.on(s,(...n)=>t.emit(s,...n))}});var ti=x((Nd,ei)=>{"use strict";ei.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var si=x((Bd,ri)=>{"use strict";var Se=(e,t,r)=>{ri.exports[t]=class extends e{constructor(...n){super(typeof r=="string"?r:r(n)),this.name=`${super.name} [${t}]`,this.code=t}}};Se(TypeError,"ERR_INVALID_ARG_TYPE",e=>{let t=e[0].includes(".")?"property":"argument",r=e[1],s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`});Se(TypeError,"ERR_INVALID_PROTOCOL",e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`);Se(Error,"ERR_HTTP_HEADERS_SENT",e=>`Cannot ${e[0]} headers after they are sent to the client`);Se(TypeError,"ERR_INVALID_HTTP_TOKEN",e=>`${e[0]} must be a valid HTTP token [${e[1]}]`);Se(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",e=>`Invalid value "${e[0]} for header "${e[1]}"`);Se(TypeError,"ERR_INVALID_CHAR",e=>`Invalid character in ${e[0]} [${e[1]}]`)});var Mr=x(($d,fi)=>{"use strict";var tu=require("http2"),{Writable:ru}=require("stream"),{Agent:ni,globalAgent:su}=Pr(),nu=kr(),iu=qr(),ou=Zn(),au=ti(),{ERR_INVALID_ARG_TYPE:Ir,ERR_INVALID_PROTOCOL:cu,ERR_HTTP_HEADERS_SENT:ii,ERR_INVALID_HTTP_TOKEN:uu,ERR_HTTP_INVALID_HEADER_VALUE:fu,ERR_INVALID_CHAR:du}=si(),{HTTP2_HEADER_STATUS:oi,HTTP2_HEADER_METHOD:ai,HTTP2_HEADER_PATH:ci,HTTP2_METHOD_CONNECT:lu}=tu.constants,q=Symbol("headers"),Lr=Symbol("origin"),Fr=Symbol("session"),ui=Symbol("options"),vt=Symbol("flushedHeaders"),$e=Symbol("jobs"),hu=/^[\^`\-\w!#$%&*+.|~]+$/,mu=/[^\t\u0020-\u007E\u0080-\u00FF]/,jr=class extends ru{constructor(t,r,s){super({autoDestroy:!1});let n=typeof t=="string"||t instanceof URL;if(n&&(t=iu(t instanceof URL?t:new URL(t))),typeof r=="function"||r===void 0?(s=r,r=n?t:{...t}):r={...t,...r},r.h2session)this[Fr]=r.h2session;else if(r.agent===!1)this.agent=new ni({maxFreeSessions:0});else if(typeof r.agent>"u"||r.agent===null)typeof r.createConnection=="function"?(this.agent=new ni({maxFreeSessions:0}),this.agent.createConnection=r.createConnection):this.agent=su;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new Ir("options.agent",["Agent-like Object","undefined","false"],r.agent);if(r.protocol&&r.protocol!=="https:")throw new cu(r.protocol,"https:");let o=r.port||r.defaultPort||this.agent&&this.agent.defaultPort||443,i=r.hostname||r.host||"localhost";delete r.hostname,delete r.host,delete r.port;let{timeout:a}=r;if(r.timeout=void 0,this[q]=Object.create(null),this[$e]=[],this.socket=null,this.connection=null,this.method=r.method||"GET",this.path=r.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,r.headers)for(let[u,f]of Object.entries(r.headers))this.setHeader(u,f);r.auth&&!("authorization"in this[q])&&(this[q].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[ui]=r,o===443?(this[Lr]=`https://${i}`,":authority"in this[q]||(this[q][":authority"]=i)):(this[Lr]=`https://${i}:${o}`,":authority"in this[q]||(this[q][":authority"]=`${i}:${o}`)),a&&this.setTimeout(a),s&&this.once("response",s),this[vt]=!1}get method(){return this[q][ai]}set method(t){t&&(this[q][ai]=t.toUpperCase())}get path(){return this[q][ci]}set path(t){t&&(this[q][ci]=t)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(t,r,s){if(this._mustNotHaveABody){s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let n=()=>this._request.write(t,r,s);this._request?n():this[$e].push(n)}_final(t){if(this.destroyed)return;this.flushHeaders();let r=()=>{if(this._mustNotHaveABody){t();return}this._request.end(t)};this._request?r():this[$e].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(t,r){this.res&&this.res._dump(),this._request&&this._request.destroy(),r(t)}async flushHeaders(){if(this[vt]||this.destroyed)return;this[vt]=!0;let t=this.method===lu,r=s=>{if(this._request=s,this.destroyed){s.destroy();return}t||ou(s,this,["timeout","continue","close","error"]);let n=i=>(...a)=>{!this.writable&&!this.destroyed?i(...a):this.once("finish",()=>{i(...a)})};s.once("response",n((i,a,u)=>{let f=new nu(this.socket,s.readableHighWaterMark);this.res=f,f.req=this,f.statusCode=i[oi],f.headers=i,f.rawHeaders=u,f.once("end",()=>{this.aborted?(f.aborted=!0,f.emit("aborted")):(f.complete=!0,f.socket=null,f.connection=null)}),t?(f.upgrade=!0,this.emit("connect",f,s,Buffer.alloc(0))?this.emit("close"):s.destroy()):(s.on("data",l=>{!f._dumped&&!f.push(l)&&s.pause()}),s.once("end",()=>{f.push(null)}),this.emit("response",f)||f._dump())})),s.once("headers",n(i=>this.emit("information",{statusCode:i[oi]}))),s.once("trailers",n((i,a,u)=>{let{res:f}=this;f.trailers=i,f.rawTrailers=u}));let{socket:o}=s.session;this.socket=o,this.connection=o;for(let i of this[$e])i();this.emit("socket",this.socket)};if(this[Fr])try{r(this[Fr].request(this[q]))}catch(s){this.emit("error",s)}else{this.reusedSocket=!0;try{r(await this.agent.request(this[Lr],this[ui],this[q]))}catch(s){this.emit("error",s)}}}getHeader(t){if(typeof t!="string")throw new Ir("name","string",t);return this[q][t.toLowerCase()]}get headersSent(){return this[vt]}removeHeader(t){if(typeof t!="string")throw new Ir("name","string",t);if(this.headersSent)throw new ii("remove");delete this[q][t.toLowerCase()]}setHeader(t,r){if(this.headersSent)throw new ii("set");if(typeof t!="string"||!hu.test(t)&&!au(t))throw new uu("Header name",t);if(typeof r>"u")throw new fu(r,t);if(mu.test(r))throw new du("header content",t);this[q][t.toLowerCase()]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(t,r){let s=()=>this._request.setTimeout(t,r);return this._request?s():this[$e].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(t){}};fi.exports=jr});var li=x((Wd,di)=>{"use strict";var pu=require("tls");di.exports=(e={},t=pu.connect)=>new Promise((r,s)=>{let n=!1,o,i=async()=>{await u,o.off("timeout",a),o.off("error",s),e.resolveSocket?(r({alpnProtocol:o.alpnProtocol,socket:o,timeout:n}),n&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),r({alpnProtocol:o.alpnProtocol,timeout:n}))},a=async()=>{n=!0,i()},u=(async()=>{try{o=await t(e,i),o.on("error",s),o.once("timeout",a)}catch(f){s(f)}})()})});var mi=x((Gd,hi)=>{"use strict";var yu=require("net");hi.exports=e=>{let t=e.host,r=e.headers&&e.headers.host;return r&&(r.startsWith("[")?r.indexOf("]")===-1?t=r:t=r.slice(1,-1):t=r.split(":",1)[0]),yu.isIP(t)?"":t}});var gi=x((Vd,Hr)=>{"use strict";var pi=require("http"),zr=require("https"),gu=li(),bu=Rr(),wu=Mr(),_u=mi(),xu=qr(),Et=new bu({maxSize:100}),We=new Map,yi=(e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};let s=()=>{e.emit("free",t,r)};t.on("free",s);let n=()=>{e.removeSocket(t,r)};t.on("close",n);let o=()=>{e.removeSocket(t,r),t.off("close",n),t.off("free",s),t.off("agentRemove",o)};t.on("agentRemove",o),e.emit("free",t,r)},vu=async e=>{let t=`${e.host}:${e.port}:${e.ALPNProtocols.sort()}`;if(!Et.has(t)){if(We.has(t))return(await We.get(t)).alpnProtocol;let{path:r,agent:s}=e;e.path=e.socketPath;let n=gu(e);We.set(t,n);try{let{socket:o,alpnProtocol:i}=await n;if(Et.set(t,i),e.path=r,i==="h2")o.destroy();else{let{globalAgent:a}=zr,u=zr.Agent.prototype.createConnection;s?s.createConnection===u?yi(s,o,e):o.destroy():a.createConnection===u?yi(a,o,e):o.destroy()}return We.delete(t),i}catch(o){throw We.delete(t),o}}return Et.get(t)};Hr.exports=async(e,t,r)=>{if((typeof e=="string"||e instanceof URL)&&(e=xu(new URL(e))),typeof t=="function"&&(r=t,t=void 0),t={ALPNProtocols:["h2","http/1.1"],...e,...t,resolveSocket:!0},!Array.isArray(t.ALPNProtocols)||t.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";let s=t.protocol==="https:";t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||_u(t),t.port=t.port||(s?443:80),t._defaultAgent=s?zr.globalAgent:pi.globalAgent;let n=t.agent;if(n){if(n.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");t.agent=n[s?"https":"http"]}return s&&await vu(t)==="h2"?(n&&(t.agent=n.http2),new wu(t,r)):pi.request(t,r)};Hr.exports.protocolCache=Et});var wi=x((Jd,bi)=>{"use strict";var Eu=require("http2"),Cu=Pr(),Ur=Mr(),Su=kr(),Tu=gi(),Ru=(e,t,r)=>new Ur(e,t,r),Ou=(e,t,r)=>{let s=new Ur(e,t,r);return s.end(),s};bi.exports={...Eu,ClientRequest:Ur,IncomingMessage:Su,...Cu,request:Ru,get:Ou,auto:Tu}});var Dr=x(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var _i=Z();Nr.default=e=>_i.default.nodeStream(e)&&_i.default.function_(e.getBoundary)});var Ci=x(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var vi=require("fs"),Ei=require("util"),xi=Z(),Pu=Dr(),Au=Ei.promisify(vi.stat);Br.default=async(e,t)=>{if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(xi.default.string(e))return Buffer.byteLength(e);if(xi.default.buffer(e))return e.length;if(Pu.default(e))return Ei.promisify(e.getLength.bind(e))();if(e instanceof vi.ReadStream){let{size:r}=await Au(e.path);return r===0?void 0:r}}});var Wr=x($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});function ku(e,t,r){let s={};for(let n of r)s[n]=(...o)=>{t.emit(n,...o)},e.on(n,s[n]);return()=>{for(let n of r)e.off(n,s[n])}}$r.default=ku});var Si=x(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.default=()=>{let e=[];return{once(t,r,s){t.once(r,s),e.push({origin:t,event:r,fn:s})},unhandleAll(){for(let t of e){let{origin:r,event:s,fn:n}=t;r.removeListener(s,n)}e.length=0}}}});var Ri=x(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.TimeoutError=void 0;var qu=require("net"),Iu=Si(),Ti=Symbol("reentry"),Lu=()=>{},Ct=class extends Error{constructor(t,r){super(`Timeout awaiting '${r}' for ${t}ms`),this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};Ge.TimeoutError=Ct;Ge.default=(e,t,r)=>{if(Ti in e)return Lu;e[Ti]=!0;let s=[],{once:n,unhandleAll:o}=Iu.default(),i=(d,h,y)=>{var g;let b=setTimeout(h,d,d,y);(g=b.unref)===null||g===void 0||g.call(b);let m=()=>{clearTimeout(b)};return s.push(m),m},{host:a,hostname:u}=r,f=(d,h)=>{e.destroy(new Ct(d,h))},l=()=>{for(let d of s)d();o()};if(e.once("error",d=>{if(l(),e.listenerCount("error")===0)throw d}),e.once("close",l),n(e,"response",d=>{n(d,"end",l)}),typeof t.request<"u"&&i(t.request,f,"request"),typeof t.socket<"u"){let d=()=>{f(t.socket,"socket")};e.setTimeout(t.socket,d),s.push(()=>{e.removeListener("timeout",d)})}return n(e,"socket",d=>{var h;let{socketPath:y}=e;if(d.connecting){let g=Boolean(y??qu.isIP((h=u??a)!==null&&h!==void 0?h:"")!==0);if(typeof t.lookup<"u"&&!g&&typeof d.address().address>"u"){let b=i(t.lookup,f,"lookup");n(d,"lookup",b)}if(typeof t.connect<"u"){let b=()=>i(t.connect,f,"connect");g?n(d,"connect",b()):n(d,"lookup",m=>{m===null&&n(d,"connect",b())})}typeof t.secureConnect<"u"&&r.protocol==="https:"&&n(d,"connect",()=>{let b=i(t.secureConnect,f,"secureConnect");n(d,"secureConnect",b)})}if(typeof t.send<"u"){let g=()=>i(t.send,f,"send");d.connecting?n(d,"connect",()=>{n(e,"upload-complete",g())}):n(e,"upload-complete",g())}}),typeof t.response<"u"&&n(e,"upload-complete",()=>{let d=i(t.response,f,"response");n(e,"response",d)}),l}});var Pi=x(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});var Oi=Z();Vr.default=e=>{e=e;let t={protocol:e.protocol,hostname:Oi.default.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return Oi.default.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}});var Ai=x(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});var Fu=require("url"),ju=["protocol","host","hostname","port","pathname","search"];Jr.default=(e,t)=>{var r,s;if(t.path){if(t.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(t.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(t.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(t.search&&t.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!e){if(!t.protocol)throw new TypeError("No URL protocol specified");e=`${t.protocol}//${(s=(r=t.hostname)!==null&&r!==void 0?r:t.host)!==null&&s!==void 0?s:""}`}let n=new Fu.URL(e);if(t.path){let o=t.path.indexOf("?");o===-1?t.pathname=t.path:(t.pathname=t.path.slice(0,o),t.search=t.path.slice(o+1)),delete t.path}for(let o of ju)t[o]&&(n[o]=t[o].toString());return n}});var ki=x(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});var Kr=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(t,r){typeof t=="object"?this.weakMap.set(t,r):this.map.set(t,r)}get(t){return typeof t=="object"?this.weakMap.get(t):this.map.get(t)}has(t){return typeof t=="object"?this.weakMap.has(t):this.map.has(t)}};Yr.default=Kr});var Xr=x(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var Mu=async e=>{let t=[],r=0;for await(let s of e)t.push(s),r+=Buffer.byteLength(s);return Buffer.isBuffer(t[0])?Buffer.concat(t,r):Buffer.from(t.join(""))};Qr.default=Mu});var Ii=x(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.dnsLookupIpVersionToFamily=he.isDnsLookupIpVersion=void 0;var qi={auto:0,ipv4:4,ipv6:6};he.isDnsLookupIpVersion=e=>e in qi;he.dnsLookupIpVersionToFamily=e=>{if(he.isDnsLookupIpVersion(e))return qi[e];throw new Error("Invalid DNS lookup IP version")}});var Zr=x(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.isResponseOk=void 0;St.isResponseOk=e=>{let{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||t===304}});var Fi=x(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});var Li=new Set;es.default=e=>{Li.has(e)||(Li.add(e),process.emitWarning(`Got: ${e}`,{type:"DeprecationWarning"}))}});var ji=x(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});var T=Z(),zu=(e,t)=>{if(T.default.null_(e.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");T.assert.any([T.default.string,T.default.undefined],e.encoding),T.assert.any([T.default.boolean,T.default.undefined],e.resolveBodyOnly),T.assert.any([T.default.boolean,T.default.undefined],e.methodRewriting),T.assert.any([T.default.boolean,T.default.undefined],e.isStream),T.assert.any([T.default.string,T.default.undefined],e.responseType),e.responseType===void 0&&(e.responseType="text");let{retry:r}=e;if(t?e.retry={...t.retry}:e.retry={calculateDelay:s=>s.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},T.default.object(r)?(e.retry={...e.retry,...r},e.retry.methods=[...new Set(e.retry.methods.map(s=>s.toUpperCase()))],e.retry.statusCodes=[...new Set(e.retry.statusCodes)],e.retry.errorCodes=[...new Set(e.retry.errorCodes)]):T.default.number(r)&&(e.retry.limit=r),T.default.undefined(e.retry.maxRetryAfter)&&(e.retry.maxRetryAfter=Math.min(...[e.timeout.request,e.timeout.connect].filter(T.default.number))),T.default.object(e.pagination)){t&&(e.pagination={...t.pagination,...e.pagination});let{pagination:s}=e;if(!T.default.function_(s.transform))throw new Error("`options.pagination.transform` must be implemented");if(!T.default.function_(s.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!T.default.function_(s.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!T.default.function_(s.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return e.responseType==="json"&&e.headers.accept===void 0&&(e.headers.accept="application/json"),e};ts.default=zu});var Mi=x(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.retryAfterStatusCodes=void 0;Ve.retryAfterStatusCodes=new Set([413,429,503]);var Hu=({attemptCount:e,retryOptions:t,error:r,retryAfter:s})=>{if(e>t.limit)return 0;let n=t.methods.includes(r.options.method),o=t.errorCodes.includes(r.code),i=r.response&&t.statusCodes.includes(r.response.statusCode);if(!n||!o&&!i)return 0;if(r.response){if(s)return t.maxRetryAfter===void 0||s>t.maxRetryAfter?0:s;if(r.response.statusCode===413)return 0}let a=Math.random()*100;return 2**(e-1)*1e3+a};Ve.default=Hu});var Ye=x(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.UnsupportedProtocolError=E.ReadError=E.TimeoutError=E.UploadError=E.CacheError=E.HTTPError=E.MaxRedirectsError=E.RequestError=E.setNonEnumerableProperties=E.knownHookEvents=E.withoutBody=E.kIsNormalizedAlready=void 0;var zi=require("util"),Hi=require("stream"),Uu=require("fs"),oe=require("url"),Ui=require("http"),rs=require("http"),Nu=require("https"),Du=hn(),Bu=_n(),Ni=Un(),$u=$n(),Wu=wi(),Gu=_t(),p=Z(),Vu=Ci(),Di=Dr(),Ju=Wr(),Bi=Ri(),Ku=Pi(),$i=Ai(),Yu=ki(),Qu=Xr(),Wi=Ii(),Xu=Zr(),ae=Fi(),Zu=ji(),ef=Mi(),ss,k=Symbol("request"),Ot=Symbol("response"),Te=Symbol("responseSize"),Re=Symbol("downloadedSize"),Oe=Symbol("bodySize"),Pe=Symbol("uploadedSize"),Tt=Symbol("serverResponsesPiped"),Gi=Symbol("unproxyEvents"),Vi=Symbol("isFromCache"),ns=Symbol("cancelTimeouts"),Ji=Symbol("startedReading"),Ae=Symbol("stopReading"),Rt=Symbol("triggerRead"),ce=Symbol("body"),Je=Symbol("jobs"),Ki=Symbol("originalResponse"),Yi=Symbol("retryTimeout");E.kIsNormalizedAlready=Symbol("isNormalizedAlready");var tf=p.default.string(process.versions.brotli);E.withoutBody=new Set(["GET","HEAD"]);E.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function rf(e){for(let t in e){let r=e[t];if(!p.default.string(r)&&!p.default.number(r)&&!p.default.boolean(r)&&!p.default.null_(r)&&!p.default.undefined(r))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}function sf(e){return p.default.object(e)&&!("statusCode"in e)}var is=new Yu.default,nf=async e=>new Promise((t,r)=>{let s=n=>{r(n)};e.pending||t(),e.once("error",s),e.once("ready",()=>{e.off("error",s),t()})}),of=new Set([300,301,302,303,304,307,308]),af=["context","body","json","form"];E.setNonEnumerableProperties=(e,t)=>{let r={};for(let s of e)if(s)for(let n of af)n in s&&(r[n]={writable:!0,configurable:!0,enumerable:!1,value:s[n]});Object.defineProperties(t,r)};var R=class extends Error{constructor(t,r,s){var n,o;if(super(t),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(n=r.code)!==null&&n!==void 0?n:"ERR_GOT_REQUEST_ERROR",s instanceof Ft?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s[Ot]}),Object.defineProperty(this,"options",{enumerable:!1,value:s.options})):Object.defineProperty(this,"options",{enumerable:!1,value:s}),this.timings=(o=this.request)===null||o===void 0?void 0:o.timings,p.default.string(r.stack)&&p.default.string(this.stack)){let i=this.stack.indexOf(this.message)+this.message.length,a=this.stack.slice(i).split(`
`).reverse(),u=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;u.length!==0&&u[0]===a[0];)a.shift();this.stack=`${this.stack.slice(0,i)}${a.reverse().join(`
`)}${u.reverse().join(`
`)}`}}};E.RequestError=R;var Pt=class extends R{constructor(t){super(`Redirected ${t.options.maxRedirects} times. Aborting.`,{},t),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};E.MaxRedirectsError=Pt;var At=class extends R{constructor(t){super(`Response code ${t.statusCode} (${t.statusMessage})`,{},t.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};E.HTTPError=At;var kt=class extends R{constructor(t,r){super(t.message,t,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};E.CacheError=kt;var qt=class extends R{constructor(t,r){super(t.message,t,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};E.UploadError=qt;var It=class extends R{constructor(t,r,s){super(t.message,t,s),this.name="TimeoutError",this.event=t.event,this.timings=r}};E.TimeoutError=It;var Ke=class extends R{constructor(t,r){super(t.message,t,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};E.ReadError=Ke;var Lt=class extends R{constructor(t){super(`Unsupported protocol "${t.url.protocol}"`,{},t),this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};E.UnsupportedProtocolError=Lt;var cf=["socket","connect","continue","information","upgrade","timeout"],Ft=class extends Hi.Duplex{constructor(t,r={},s){super({autoDestroy:!1,highWaterMark:0}),this[Re]=0,this[Pe]=0,this.requestInitialized=!1,this[Tt]=new Set,this.redirects=[],this[Ae]=!1,this[Rt]=!1,this[Je]=[],this.retryCount=0,this._progressCallbacks=[];let n=()=>this._unlockWrite(),o=()=>this._lockWrite();this.on("pipe",f=>{f.prependListener("data",n),f.on("data",o),f.prependListener("end",n),f.on("end",o)}),this.on("unpipe",f=>{f.off("data",n),f.off("data",o),f.off("end",n),f.off("end",o)}),this.on("pipe",f=>{f instanceof rs.IncomingMessage&&(this.options.headers={...f.headers,...this.options.headers})});let{json:i,body:a,form:u}=r;if((i||a||u)&&this._lockWrite(),E.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(t,r,s)}catch(f){p.default.nodeStream(r.body)&&r.body.destroy(),this.destroy(f);return}(async()=>{var f;try{this.options.body instanceof Uu.ReadStream&&await nf(this.options.body);let{url:l}=this.options;if(!l)throw new TypeError("Missing `url` property");if(this.requestUrl=l.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(f=this[k])===null||f===void 0||f.destroy();return}for(let d of this[Je])d();this[Je].length=0,this.requestInitialized=!0}catch(l){if(l instanceof R){this._beforeError(l);return}this.destroyed||this.destroy(l)}})()}static normalizeArguments(t,r,s){var n,o,i,a,u;let f=r;if(p.default.object(t)&&!p.default.urlInstance(t))r={...s,...t,...r};else{if(t&&r&&r.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...s,...r},t!==void 0&&(r.url=t),p.default.urlInstance(r.url)&&(r.url=new oe.URL(r.url.toString()))}if(r.cache===!1&&(r.cache=void 0),r.dnsCache===!1&&(r.dnsCache=void 0),p.assert.any([p.default.string,p.default.undefined],r.method),p.assert.any([p.default.object,p.default.undefined],r.headers),p.assert.any([p.default.string,p.default.urlInstance,p.default.undefined],r.prefixUrl),p.assert.any([p.default.object,p.default.undefined],r.cookieJar),p.assert.any([p.default.object,p.default.string,p.default.undefined],r.searchParams),p.assert.any([p.default.object,p.default.string,p.default.undefined],r.cache),p.assert.any([p.default.object,p.default.number,p.default.undefined],r.timeout),p.assert.any([p.default.object,p.default.undefined],r.context),p.assert.any([p.default.object,p.default.undefined],r.hooks),p.assert.any([p.default.boolean,p.default.undefined],r.decompress),p.assert.any([p.default.boolean,p.default.undefined],r.ignoreInvalidCookies),p.assert.any([p.default.boolean,p.default.undefined],r.followRedirect),p.assert.any([p.default.number,p.default.undefined],r.maxRedirects),p.assert.any([p.default.boolean,p.default.undefined],r.throwHttpErrors),p.assert.any([p.default.boolean,p.default.undefined],r.http2),p.assert.any([p.default.boolean,p.default.undefined],r.allowGetBody),p.assert.any([p.default.string,p.default.undefined],r.localAddress),p.assert.any([Wi.isDnsLookupIpVersion,p.default.undefined],r.dnsLookupIpVersion),p.assert.any([p.default.object,p.default.undefined],r.https),p.assert.any([p.default.boolean,p.default.undefined],r.rejectUnauthorized),r.https&&(p.assert.any([p.default.boolean,p.default.undefined],r.https.rejectUnauthorized),p.assert.any([p.default.function_,p.default.undefined],r.https.checkServerIdentity),p.assert.any([p.default.string,p.default.object,p.default.array,p.default.undefined],r.https.certificateAuthority),p.assert.any([p.default.string,p.default.object,p.default.array,p.default.undefined],r.https.key),p.assert.any([p.default.string,p.default.object,p.default.array,p.default.undefined],r.https.certificate),p.assert.any([p.default.string,p.default.undefined],r.https.passphrase),p.assert.any([p.default.string,p.default.buffer,p.default.array,p.default.undefined],r.https.pfx)),p.assert.any([p.default.object,p.default.undefined],r.cacheOptions),p.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===s?.headers?r.headers={...r.headers}:r.headers=Gu({...s?.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==s?.searchParams){let y;if(p.default.string(r.searchParams)||r.searchParams instanceof oe.URLSearchParams)y=new oe.URLSearchParams(r.searchParams);else{rf(r.searchParams),y=new oe.URLSearchParams;for(let g in r.searchParams){let b=r.searchParams[g];b===null?y.append(g,""):b!==void 0&&y.append(g,b)}}(n=s?.searchParams)===null||n===void 0||n.forEach((g,b)=>{y.has(b)||y.append(b,g)}),r.searchParams=y}if(r.username=(o=r.username)!==null&&o!==void 0?o:"",r.password=(i=r.password)!==null&&i!==void 0?i:"",p.default.undefined(r.prefixUrl)?r.prefixUrl=(a=s?.prefixUrl)!==null&&a!==void 0?a:"":(r.prefixUrl=r.prefixUrl.toString(),r.prefixUrl!==""&&!r.prefixUrl.endsWith("/")&&(r.prefixUrl+="/")),p.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=$i.default(r.prefixUrl+r.url,r)}else(p.default.undefined(r.url)&&r.prefixUrl!==""||r.protocol)&&(r.url=$i.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:y}=r;Object.defineProperty(r,"prefixUrl",{set:b=>{let m=r.url;if(!m.href.startsWith(b))throw new Error(`Cannot change \`prefixUrl\` from ${y} to ${b}: ${m.href}`);r.url=new oe.URL(b+m.href.slice(y.length)),y=b},get:()=>y});let{protocol:g}=r.url;if(g==="unix:"&&(g="http:",r.url=new oe.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),g!=="http:"&&g!=="https:")throw new Lt(r);r.username===""?r.username=r.url.username:r.url.username=r.username,r.password===""?r.password=r.url.password:r.url.password=r.password}let{cookieJar:l}=r;if(l){let{setCookie:y,getCookieString:g}=l;p.assert.function_(y),p.assert.function_(g),y.length===4&&g.length===0&&(y=zi.promisify(y.bind(r.cookieJar)),g=zi.promisify(g.bind(r.cookieJar)),r.cookieJar={setCookie:y,getCookieString:g})}let{cache:d}=r;if(d&&(is.has(d)||is.set(d,new Ni((y,g)=>{let b=y[k](y,g);return p.default.promise(b)&&(b.once=(m,w)=>{if(m==="error")b.catch(w);else if(m==="abort")(async()=>{try{(await b).once("abort",w)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${m}`);return b}),b},d))),r.cacheOptions={...r.cacheOptions},r.dnsCache===!0)ss||(ss=new Bu.default),r.dnsCache=ss;else if(!p.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${p.default(r.dnsCache)}`);p.default.number(r.timeout)?r.timeout={request:r.timeout}:s&&r.timeout!==s.timeout?r.timeout={...s.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});let h=r.hooks===s?.hooks;r.hooks={...r.hooks};for(let y of E.knownHookEvents)if(y in r.hooks)if(p.default.array(r.hooks[y]))r.hooks[y]=[...r.hooks[y]];else throw new TypeError(`Parameter \`${y}\` must be an Array, got ${p.default(r.hooks[y])}`);else r.hooks[y]=[];if(s&&!h)for(let y of E.knownHookEvents)s.hooks[y].length>0&&(r.hooks[y]=[...s.hooks[y],...r.hooks[y]]);if("family"in r&&ae.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),s?.https&&(r.https={...s.https,...r.https}),"rejectUnauthorized"in r&&ae.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&ae.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&ae.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&ae.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&ae.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&ae.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&ae.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent){for(let y in r.agent)if(y!=="http"&&y!=="https"&&y!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${y}\``)}return r.maxRedirects=(u=r.maxRedirects)!==null&&u!==void 0?u:0,E.setNonEnumerableProperties([s,f],r),Zu.default(r,s)}_lockWrite(){let t=()=>{throw new TypeError("The payload has been already provided")};this.write=t,this.end=t}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:t}=this,{headers:r}=t,s=!p.default.undefined(t.form),n=!p.default.undefined(t.json),o=!p.default.undefined(t.body),i=s||n||o,a=E.withoutBody.has(t.method)&&!(t.method==="GET"&&t.allowGetBody);if(this._cannotHaveBody=a,i){if(a)throw new TypeError(`The \`${t.method}\` method cannot be used with a body`);if([o,s,n].filter(u=>u).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(o&&!(t.body instanceof Hi.Readable)&&!p.default.string(t.body)&&!p.default.buffer(t.body)&&!Di.default(t.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(s&&!p.default.object(t.form))throw new TypeError("The `form` option must be an Object");{let u=!p.default.string(r["content-type"]);o?(Di.default(t.body)&&u&&(r["content-type"]=`multipart/form-data; boundary=${t.body.getBoundary()}`),this[ce]=t.body):s?(u&&(r["content-type"]="application/x-www-form-urlencoded"),this[ce]=new oe.URLSearchParams(t.form).toString()):(u&&(r["content-type"]="application/json"),this[ce]=t.stringifyJson(t.json));let f=await Vu.default(this[ce],t.headers);p.default.undefined(r["content-length"])&&p.default.undefined(r["transfer-encoding"])&&!a&&!p.default.undefined(f)&&(r["content-length"]=String(f))}}else a?this._lockWrite():this._unlockWrite();this[Oe]=Number(r["content-length"])||void 0}async _onResponseBase(t){let{options:r}=this,{url:s}=r;this[Ki]=t,r.decompress&&(t=$u(t));let n=t.statusCode,o=t;o.statusMessage=o.statusMessage?o.statusMessage:Ui.STATUS_CODES[n],o.url=r.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=t.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[Vi]=o.isFromCache,this[Te]=Number(t.headers["content-length"])||void 0,this[Ot]=t,t.once("end",()=>{this[Te]=this[Re],this.emit("downloadProgress",this.downloadProgress)}),t.once("error",a=>{t.destroy(),this._beforeError(new Ke(a,this))}),t.once("aborted",()=>{this._beforeError(new Ke({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let i=t.headers["set-cookie"];if(p.default.object(r.cookieJar)&&i){let a=i.map(async u=>r.cookieJar.setCookie(u,s.toString()));r.ignoreInvalidCookies&&(a=a.map(async u=>u.catch(()=>{})));try{await Promise.all(a)}catch(u){this._beforeError(u);return}}if(r.followRedirect&&t.headers.location&&of.has(n)){if(t.resume(),this[k]&&(this[ns](),delete this[k],this[Gi]()),(n===303&&r.method!=="GET"&&r.method!=="HEAD"||!r.methodRewriting)&&(r.method="GET","body"in r&&delete r.body,"json"in r&&delete r.json,"form"in r&&delete r.form,this[ce]=void 0,delete r.headers["content-length"]),this.redirects.length>=r.maxRedirects){this._beforeError(new Pt(this));return}try{let d=function(h){return h.protocol==="unix:"||h.hostname==="unix"},u=Buffer.from(t.headers.location,"binary").toString(),f=new oe.URL(u,s),l=f.toString();if(decodeURI(l),!d(s)&&d(f)){this._beforeError(new R("Cannot redirect to UNIX socket",{},this));return}f.hostname!==s.hostname||f.port!==s.port?("host"in r.headers&&delete r.headers.host,"cookie"in r.headers&&delete r.headers.cookie,"authorization"in r.headers&&delete r.headers.authorization,(r.username||r.password)&&(r.username="",r.password="")):(f.username=r.username,f.password=r.password),this.redirects.push(l),r.url=f;for(let h of r.hooks.beforeRedirect)await h(r,o);this.emit("redirect",o,r),await this._makeRequest()}catch(u){this._beforeError(u);return}return}if(r.isStream&&r.throwHttpErrors&&!Xu.isResponseOk(o)){this._beforeError(new At(o));return}t.on("readable",()=>{this[Rt]&&this._read()}),this.on("resume",()=>{t.resume()}),this.on("pause",()=>{t.pause()}),t.once("end",()=>{this.push(null)}),this.emit("response",t);for(let a of this[Tt])if(!a.headersSent){for(let u in t.headers){let f=r.decompress?u!=="content-encoding":!0,l=t.headers[u];f&&a.setHeader(u,l)}a.statusCode=n}}async _onResponse(t){try{await this._onResponseBase(t)}catch(r){this._beforeError(r)}}_onRequest(t){let{options:r}=this,{timeout:s,url:n}=r;Du.default(t),this[ns]=Bi.default(t,s,n);let o=r.cache?"cacheableResponse":"response";t.once(o,u=>{this._onResponse(u)}),t.once("error",u=>{var f;t.destroy(),(f=t.res)===null||f===void 0||f.removeAllListeners("end"),u=u instanceof Bi.TimeoutError?new It(u,this.timings,this):new R(u.message,u,this),this._beforeError(u)}),this[Gi]=Ju.default(t,this,cf),this[k]=t,this.emit("uploadProgress",this.uploadProgress);let i=this[ce],a=this.redirects.length===0?this:t;p.default.nodeStream(i)?(i.pipe(a),i.once("error",u=>{this._beforeError(new qt(u,this))})):(this._unlockWrite(),p.default.undefined(i)?(this._cannotHaveBody||this._noPipe)&&(a.end(),this._lockWrite()):(this._writeRequest(i,void 0,()=>{}),a.end(),this._lockWrite())),this.emit("request",t)}async _createCacheableRequest(t,r){return new Promise((s,n)=>{Object.assign(r,Ku.default(t)),delete r.url;let o,i=is.get(r.cache)(r,async a=>{a._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",a),s(a)});r.url=t,i.once("error",n),i.once("request",async a=>{o=a,s(o)})})}async _makeRequest(){var t,r,s,n,o;let{options:i}=this,{headers:a}=i;for(let w in a)if(p.default.undefined(a[w]))delete a[w];else if(p.default.null_(a[w]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${w}\` header`);if(i.decompress&&p.default.undefined(a["accept-encoding"])&&(a["accept-encoding"]=tf?"gzip, deflate, br":"gzip, deflate"),i.cookieJar){let w=await i.cookieJar.getCookieString(i.url.toString());p.default.nonEmptyString(w)&&(i.headers.cookie=w)}for(let w of i.hooks.beforeRequest){let v=await w(i);if(!p.default.undefined(v)){i.request=()=>v;break}}i.body&&this[ce]!==i.body&&(this[ce]=i.body);let{agent:u,request:f,timeout:l,url:d}=i;if(i.dnsCache&&!("lookup"in i)&&(i.lookup=i.dnsCache.lookup),d.hostname==="unix"){let w=/(?<socketPath>.+?):(?<path>.+)/.exec(`${d.pathname}${d.search}`);if(w?.groups){let{socketPath:v,path:C}=w.groups;Object.assign(i,{socketPath:v,path:C,host:""})}}let h=d.protocol==="https:",y;i.http2?y=Wu.auto:y=h?Nu.request:Ui.request;let g=(t=i.request)!==null&&t!==void 0?t:y,b=i.cache?this._createCacheableRequest:g;u&&!i.http2&&(i.agent=u[h?"https":"http"]),i[k]=g,delete i.request,delete i.timeout;let m=i;if(m.shared=(r=i.cacheOptions)===null||r===void 0?void 0:r.shared,m.cacheHeuristic=(s=i.cacheOptions)===null||s===void 0?void 0:s.cacheHeuristic,m.immutableMinTimeToLive=(n=i.cacheOptions)===null||n===void 0?void 0:n.immutableMinTimeToLive,m.ignoreCargoCult=(o=i.cacheOptions)===null||o===void 0?void 0:o.ignoreCargoCult,i.dnsLookupIpVersion!==void 0)try{m.family=Wi.dnsLookupIpVersionToFamily(i.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}i.https&&("rejectUnauthorized"in i.https&&(m.rejectUnauthorized=i.https.rejectUnauthorized),i.https.checkServerIdentity&&(m.checkServerIdentity=i.https.checkServerIdentity),i.https.certificateAuthority&&(m.ca=i.https.certificateAuthority),i.https.certificate&&(m.cert=i.https.certificate),i.https.key&&(m.key=i.https.key),i.https.passphrase&&(m.passphrase=i.https.passphrase),i.https.pfx&&(m.pfx=i.https.pfx));try{let w=await b(d,m);p.default.undefined(w)&&(w=y(d,m)),i.request=f,i.timeout=l,i.agent=u,i.https&&("rejectUnauthorized"in i.https&&delete m.rejectUnauthorized,i.https.checkServerIdentity&&delete m.checkServerIdentity,i.https.certificateAuthority&&delete m.ca,i.https.certificate&&delete m.cert,i.https.key&&delete m.key,i.https.passphrase&&delete m.passphrase,i.https.pfx&&delete m.pfx),sf(w)?this._onRequest(w):this.writable?(this.once("finish",()=>{this._onResponse(w)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(w)}catch(w){throw w instanceof Ni.CacheError?new kt(w,this):new R(w.message,w,this)}}async _error(t){try{for(let r of this.options.hooks.beforeError)t=await r(t)}catch(r){t=new R(r.message,r,this)}this.destroy(t)}_beforeError(t){if(this[Ae])return;let{options:r}=this,s=this.retryCount+1;this[Ae]=!0,t instanceof R||(t=new R(t.message,t,this));let n=t,{response:o}=n;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await Qu.default(o),o.body=o.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let i;try{let a;o&&"retry-after"in o.headers&&(a=Number(o.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(o.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3),i=await r.retry.calculateDelay({attemptCount:s,retryOptions:r.retry,error:n,retryAfter:a,computedValue:ef.default({attemptCount:s,retryOptions:r.retry,error:n,retryAfter:a,computedValue:0})})}catch(a){this._error(new R(a.message,a,this));return}if(i){let a=async()=>{try{for(let u of this.options.hooks.beforeRetry)await u(this.options,n,s)}catch(u){this._error(new R(u.message,t,this));return}this.destroyed||(this.destroy(),this.emit("retry",s,t))};this[Yi]=setTimeout(a,i);return}}this._error(n)})()}_read(){this[Rt]=!0;let t=this[Ot];if(t&&!this[Ae]){t.readableLength&&(this[Rt]=!1);let r;for(;(r=t.read())!==null;){this[Re]+=r.length,this[Ji]=!0;let s=this.downloadProgress;s.percent<1&&this.emit("downloadProgress",s),this.push(r)}}}_write(t,r,s){let n=()=>{this._writeRequest(t,r,s)};this.requestInitialized?n():this[Je].push(n)}_writeRequest(t,r,s){this[k].destroyed||(this._progressCallbacks.push(()=>{this[Pe]+=Buffer.byteLength(t,r);let n=this.uploadProgress;n.percent<1&&this.emit("uploadProgress",n)}),this[k].write(t,r,n=>{!n&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),s(n)}))}_final(t){let r=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(k in this)){t();return}if(this[k].destroyed){t();return}this[k].end(s=>{s||(this[Oe]=this[Pe],this.emit("uploadProgress",this.uploadProgress),this[k].emit("upload-complete")),t(s)})};this.requestInitialized?r():this[Je].push(r)}_destroy(t,r){var s;this[Ae]=!0,clearTimeout(this[Yi]),k in this&&(this[ns](),!((s=this[Ot])===null||s===void 0)&&s.complete||this[k].destroy()),t!==null&&!p.default.undefined(t)&&!(t instanceof R)&&(t=new R(t.message,t,this)),r(t)}get _isAboutToError(){return this[Ae]}get ip(){var t;return(t=this.socket)===null||t===void 0?void 0:t.remoteAddress}get aborted(){var t,r,s;return((r=(t=this[k])===null||t===void 0?void 0:t.destroyed)!==null&&r!==void 0?r:this.destroyed)&&!(!((s=this[Ki])===null||s===void 0)&&s.complete)}get socket(){var t,r;return(r=(t=this[k])===null||t===void 0?void 0:t.socket)!==null&&r!==void 0?r:void 0}get downloadProgress(){let t;return this[Te]?t=this[Re]/this[Te]:this[Te]===this[Re]?t=1:t=0,{percent:t,transferred:this[Re],total:this[Te]}}get uploadProgress(){let t;return this[Oe]?t=this[Pe]/this[Oe]:this[Oe]===this[Pe]?t=1:t=0,{percent:t,transferred:this[Pe],total:this[Oe]}}get timings(){var t;return(t=this[k])===null||t===void 0?void 0:t.timings}get isFromCache(){return this[Vi]}pipe(t,r){if(this[Ji])throw new Error("Failed to pipe. The response has been emitted already.");return t instanceof rs.ServerResponse&&this[Tt].add(t),super.pipe(t,r)}unpipe(t){return t instanceof rs.ServerResponse&&this[Tt].delete(t),super.unpipe(t),this}};E.default=Ft});var Qe=x($=>{"use strict";var uf=$&&$.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),ff=$&&$.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&uf(t,e,r)};Object.defineProperty($,"__esModule",{value:!0});$.CancelError=$.ParseError=void 0;var Qi=Ye(),os=class extends Qi.RequestError{constructor(t,r){let{options:s}=r.request;super(`${t.message} in "${s.url.toString()}"`,t,r.request),this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};$.ParseError=os;var as=class extends Qi.RequestError{constructor(t){super("Promise was canceled",{},t),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};$.CancelError=as;ff(Ye(),$)});var Zi=x(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});var Xi=Qe(),df=(e,t,r,s)=>{let{rawBody:n}=e;try{if(t==="text")return n.toString(s);if(t==="json")return n.length===0?"":r(n.toString());if(t==="buffer")return n;throw new Xi.ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)}catch(o){throw new Xi.ParseError(o,e)}};cs.default=df});var us=x(ue=>{"use strict";var lf=ue&&ue.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),hf=ue&&ue.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lf(t,e,r)};Object.defineProperty(ue,"__esModule",{value:!0});var mf=require("events"),pf=Z(),yf=dn(),jt=Qe(),eo=Zi(),to=Ye(),gf=Wr(),bf=Xr(),ro=Zr(),wf=["request","response","redirect","uploadProgress","downloadProgress"];function so(e){let t,r,s=new mf.EventEmitter,n=new yf((i,a,u)=>{let f=l=>{let d=new to.default(void 0,e);d.retryCount=l,d._noPipe=!0,u(()=>d.destroy()),u.shouldReject=!1,u(()=>a(new jt.CancelError(d))),t=d,d.once("response",async g=>{var b;if(g.retryCount=l,g.request.aborted)return;let m;try{m=await bf.default(d),g.rawBody=m}catch{return}if(d._isAboutToError)return;let w=((b=g.headers["content-encoding"])!==null&&b!==void 0?b:"").toLowerCase(),v=["gzip","deflate","br"].includes(w),{options:C}=d;if(v&&!C.decompress)g.body=m;else try{g.body=eo.default(g,C.responseType,C.parseJson,C.encoding)}catch(O){if(g.body=m.toString(),ro.isResponseOk(g)){d._beforeError(O);return}}try{for(let[O,L]of C.hooks.afterResponse.entries())g=await L(g,async J=>{let F=to.default.normalizeArguments(void 0,{...J,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},C);F.hooks.afterResponse=F.hooks.afterResponse.slice(0,O);for(let $t of F.hooks.beforeRetry)await $t(F);let K=so(F);return u(()=>{K.catch(()=>{}),K.cancel()}),K})}catch(O){d._beforeError(new jt.RequestError(O.message,O,d));return}if(r=g,!ro.isResponseOk(g)){d._beforeError(new jt.HTTPError(g));return}d.destroy(),i(d.options.resolveBodyOnly?g.body:g)});let h=g=>{if(n.isCanceled)return;let{options:b}=d;if(g instanceof jt.HTTPError&&!b.throwHttpErrors){let{response:m}=g;i(d.options.resolveBodyOnly?m.body:m);return}a(g)};d.once("error",h);let y=d.options.body;d.once("retry",(g,b)=>{var m,w;if(y===((m=b.request)===null||m===void 0?void 0:m.options.body)&&pf.default.nodeStream((w=b.request)===null||w===void 0?void 0:w.options.body)){h(b);return}f(g)}),gf.default(d,s,wf)};f(0)});n.on=(i,a)=>(s.on(i,a),n);let o=i=>{let a=(async()=>{await n;let{options:u}=r.request;return eo.default(r,i,u.parseJson,u.encoding)})();return Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)),a};return n.json=()=>{let{headers:i}=t.options;return!t.writableFinished&&i.accept===void 0&&(i.accept="application/json"),o("json")},n.buffer=()=>o("buffer"),n.text=()=>o("text"),n}ue.default=so;hf(Qe(),ue)});var no=x(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});var _f=Qe();function xf(e,...t){let r=(async()=>{if(e instanceof _f.RequestError)try{for(let n of t)if(n)for(let o of n)e=await o(e)}catch(n){e=n}throw e})(),s=()=>r;return r.json=s,r.text=s,r.buffer=s,r.on=s,r}fs.default=xf});var ao=x(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});var io=Z();function oo(e){for(let t of Object.values(e))(io.default.plainObject(t)||io.default.array(t))&&oo(t);return Object.freeze(e)}ds.default=oo});var uo=x(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0})});var ls=x(U=>{"use strict";var vf=U&&U.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),Ef=U&&U.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&vf(t,e,r)};Object.defineProperty(U,"__esModule",{value:!0});U.defaultHandler=void 0;var fo=Z(),H=us(),Cf=no(),zt=Ye(),Sf=ao(),Tf={RequestError:H.RequestError,CacheError:H.CacheError,ReadError:H.ReadError,HTTPError:H.HTTPError,MaxRedirectsError:H.MaxRedirectsError,TimeoutError:H.TimeoutError,ParseError:H.ParseError,CancelError:H.CancelError,UnsupportedProtocolError:H.UnsupportedProtocolError,UploadError:H.UploadError},Rf=async e=>new Promise(t=>{setTimeout(t,e)}),{normalizeArguments:Mt}=zt.default,lo=(...e)=>{let t;for(let r of e)t=Mt(void 0,r,t);return t},Of=e=>e.isStream?new zt.default(void 0,e):H.default(e),Pf=e=>"defaults"in e&&"options"in e.defaults,Af=["get","post","put","patch","head","delete"];U.defaultHandler=(e,t)=>t(e);var ho=(e,t)=>{if(e)for(let r of e)r(t)},mo=e=>{e._rawHandlers=e.handlers,e.handlers=e.handlers.map(s=>(n,o)=>{let i,a=s(n,u=>(i=o(u),i));if(a!==i&&!n.isStream&&i){let u=a,{then:f,catch:l,finally:d}=u;Object.setPrototypeOf(u,Object.getPrototypeOf(i)),Object.defineProperties(u,Object.getOwnPropertyDescriptors(i)),u.then=f,u.catch=l,u.finally=d}return a});let t=(s,n={},o)=>{var i,a;let u=0,f=l=>e.handlers[u++](l,u===e.handlers.length?Of:f);if(fo.default.plainObject(s)){let l={...s,...n};zt.setNonEnumerableProperties([s,n],l),n=l,s=void 0}try{let l;try{ho(e.options.hooks.init,n),ho((i=n.hooks)===null||i===void 0?void 0:i.init,n)}catch(h){l=h}let d=Mt(s,n,o??e.options);if(d[zt.kIsNormalizedAlready]=!0,l)throw new H.RequestError(l.message,l,d);return f(d)}catch(l){if(n.isStream)throw l;return Cf.default(l,e.options.hooks.beforeError,(a=n.hooks)===null||a===void 0?void 0:a.beforeError)}};t.extend=(...s)=>{let n=[e.options],o=[...e._rawHandlers],i;for(let a of s)Pf(a)?(n.push(a.defaults.options),o.push(...a.defaults._rawHandlers),i=a.defaults.mutableDefaults):(n.push(a),"handlers"in a&&o.push(...a.handlers),i=a.mutableDefaults);return o=o.filter(a=>a!==U.defaultHandler),o.length===0&&o.push(U.defaultHandler),mo({options:lo(...n),handlers:o,mutableDefaults:Boolean(i)})};let r=async function*(s,n){let o=Mt(s,n,e.options);o.resolveBodyOnly=!1;let i=o.pagination;if(!fo.default.object(i))throw new TypeError("`options.pagination` must be implemented");let a=[],{countLimit:u}=i,f=0;for(;f<i.requestLimit;){f!==0&&await Rf(i.backoff);let l=await t(void 0,void 0,o),d=await i.transform(l),h=[];for(let g of d)if(i.filter(g,a,h)&&(!i.shouldContinue(g,a,h)||(yield g,i.stackAllItems&&a.push(g),h.push(g),--u<=0)))return;let y=i.paginate(l,a,h);if(y===!1)return;y===l.request.options?o=l.request.options:y!==void 0&&(o=Mt(void 0,y,o)),f++}};t.paginate=r,t.paginate.all=async(s,n)=>{let o=[];for await(let i of r(s,n))o.push(i);return o},t.paginate.each=r,t.stream=(s,n)=>t(s,{...n,isStream:!0});for(let s of Af)t[s]=(n,o)=>t(n,{...o,method:s}),t.stream[s]=(n,o)=>t(n,{...o,method:s,isStream:!0});return Object.assign(t,Tf),Object.defineProperty(t,"defaults",{value:e.mutableDefaults?e:Sf.default(e),writable:e.mutableDefaults,configurable:e.mutableDefaults,enumerable:!0}),t.mergeOptions=lo,t};U.default=mo;Ef(uo(),U)});var go=x((ee,Ht)=>{"use strict";var kf=ee&&ee.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),po=ee&&ee.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&kf(t,e,r)};Object.defineProperty(ee,"__esModule",{value:!0});var qf=require("url"),yo=ls(),If={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:e=>e.request.options.responseType==="json"?e.body:JSON.parse(e.body),paginate:e=>{if(!Reflect.has(e.headers,"link"))return!1;let t=e.headers.link.split(","),r;for(let s of t){let n=s.split(";");if(n[1].includes("next")){r=n[0].trimStart().trim(),r=r.slice(1,-1);break}}return r?{url:new qf.URL(r)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:e=>JSON.parse(e),stringifyJson:e=>JSON.stringify(e),cacheOptions:{}},handlers:[yo.defaultHandler],mutableDefaults:!1},hs=yo.default(If);ee.default=hs;Ht.exports=hs;Ht.exports.default=hs;Ht.exports.__esModule=!0;po(ls(),ee);po(us(),ee)});var wo=x(ke=>{"use strict";var Lf=ke&&ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0});ke.getReleases=void 0;var Ff=Lf(go()),{GITHUB_TOKEN:bo}=process.env;async function jf(e,t){let r=`https://api.github.com/repos/${e}/${t}/releases`,s={headers:{"User-Agent":"@terascope/fetch-github-release"},responseType:"json"};return bo&&(s.headers.Authorization=`token ${bo}`),(await Ff.default.get(r,s)).body}ke.getReleases=jf});var xo=x(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.getLatest=void 0;function _o(){return!0}function Mf(e,t=_o,r=_o){if(!e)return null;let s=e.filter(t);if(!s.length)return null;for(let n of s){let o=n.assets.filter(r);if(o.length)return Object.assign({},n,{assets:o})}return null}Ut.getLatest=Mf});var So=x(qe=>{"use strict";var ms=qe&&qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0});qe.download=void 0;var vo=ms(require("http")),Eo=ms(require("https")),zf=ms(require("url")),{GITHUB_TOKEN:Co}=process.env;function Hf(e){let t=zf.default.parse(e),r={Accept:"application/octet-stream","User-Agent":"@terascope/fetch-github-release"};return Co&&(r.Authorization=`token ${Co}`),Object.assign({},t,{headers:r})}function Uf(e,t,r=()=>{}){return new Promise((s,n)=>{let o=/^https:/.exec(e)?Eo.default:vo.default,i=Hf(e);r(0),o.get(i,a=>{o=/^https:/.exec(a.headers.location)?Eo.default:vo.default,o.get(a.headers.location,u=>{var f;let l=parseInt((f=u.headers["content-length"])!==null&&f!==void 0?f:"0",10),d=0;u.pipe(t),u.on("data",h=>{d+=h.length,r(d/l)}),u.on("progress",r),u.on("error",n),u.on("end",s)}).on("error",n)}).on("error",n)})}qe.download=Uf});var To=x(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.rpad=void 0;function Nf(e,t){let r=e;return r.length>t&&(r=`${e.substr(0,t-3)}...`),`${r}${new Array(t-r.length+1).join(" ")}`}Nt.rpad=Nf});var Po=x((Ro,Oo)=>{Ro=Oo.exports=Ie;function Ie(e,t){if(this.stream=t.stream||process.stderr,typeof t=="number"){var r=t;t={},t.total=r}else{if(t=t||{},typeof e!="string")throw new Error("format required");if(typeof t.total!="number")throw new Error("total required")}this.fmt=e,this.curr=t.curr||0,this.total=t.total,this.width=t.width||this.total,this.clear=t.clear,this.chars={complete:t.complete||"=",incomplete:t.incomplete||"-",head:t.head||t.complete||"="},this.renderThrottle=t.renderThrottle!==0?t.renderThrottle||16:0,this.lastRender=-1/0,this.callback=t.callback||function(){},this.tokens={},this.lastDraw=""}Ie.prototype.tick=function(e,t){if(e!==0&&(e=e||1),typeof e=="object"&&(t=e,e=1),t&&(this.tokens=t),this.curr==0&&(this.start=new Date),this.curr+=e,this.render(),this.curr>=this.total){this.render(void 0,!0),this.complete=!0,this.terminate(),this.callback(this);return}};Ie.prototype.render=function(e,t){if(t=t!==void 0?t:!1,e&&(this.tokens=e),!!this.stream.isTTY){var r=Date.now(),s=r-this.lastRender;if(!(!t&&s<this.renderThrottle)){this.lastRender=r;var n=this.curr/this.total;n=Math.min(Math.max(n,0),1);var o=Math.floor(n*100),i,a,u,f=new Date-this.start,l=o==100?0:f*(this.total/this.curr-1),d=this.curr/(f/1e3),h=this.fmt.replace(":current",this.curr).replace(":total",this.total).replace(":elapsed",isNaN(f)?"0.0":(f/1e3).toFixed(1)).replace(":eta",isNaN(l)||!isFinite(l)?"0.0":(l/1e3).toFixed(1)).replace(":percent",o.toFixed(0)+"%").replace(":rate",Math.round(d)),y=Math.max(0,this.stream.columns-h.replace(":bar","").length);y&&process.platform==="win32"&&(y=y-1);var g=Math.min(this.width,y);if(u=Math.round(g*n),a=Array(Math.max(0,u+1)).join(this.chars.complete),i=Array(Math.max(0,g-u+1)).join(this.chars.incomplete),u>0&&(a=a.slice(0,-1)+this.chars.head),h=h.replace(":bar",a+i),this.tokens)for(var b in this.tokens)h=h.replace(":"+b,this.tokens[b]);this.lastDraw!==h&&(this.stream.cursorTo(0),this.stream.write(h),this.stream.clearLine(1),this.lastDraw=h)}}};Ie.prototype.update=function(e,t){var r=Math.floor(e*this.total),s=r-this.curr;this.tick(s,t)};Ie.prototype.interrupt=function(e){this.stream.clearLine(),this.stream.cursorTo(0),this.stream.write(e),this.stream.write(`
`),this.stream.write(this.lastDraw)};Ie.prototype.terminate=function(){this.clear?this.stream.clearLine&&(this.stream.clearLine(),this.stream.cursorTo(0)):this.stream.write(`
`)}});var ko=x((xl,Ao)=>{Ao.exports=Po()});var Io=x((El,qo)=>{var Df=ko(),Bf={tick(){},terminate(){},update(){},render(){}},$f={newBar(){return Bf},terminate(){},move(){},tick(){},update(){},isTTY:!1};qo.exports=class{constructor(t){return this.stream=t||process.stderr,this.isTTY=this.stream.isTTY,this.isTTY?(this.cursor=0,this.bars=[],this.terminates=0,this):$f}newBar(t,r){r.stream=this.stream;var s=new Df(t,r);this.bars.push(s);var n=this.bars.length-1;this.move(n),this.stream.write(`
`),this.cursor+=1;var o=this;return s.otick=s.tick,s.oterminate=s.terminate,s.oupdate=s.update,s.tick=function(i,a){o.tick(n,i,a)},s.terminate=function(){o.terminates+=1,o.terminates===o.bars.length&&o.terminate()},s.update=function(i,a){o.update(n,i,a)},s}terminate(){this.move(this.bars.length),this.stream.clearLine(),this.stream.cursorTo(0)}move(t){this.stream.moveCursor(0,t-this.cursor),this.cursor=t}tick(t,r,s){let n=this.bars[t];n&&(this.move(t),n.otick(r,s))}update(t,r,s){let n=this.bars[t];n&&(this.move(t),n.oupdate(r,s))}}});var jo=x(Fe=>{"use strict";var Dt=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.downloadRelease=void 0;var Lo=Dt(require("os")),Le=Dt(require("fs")),ps=Dt(require("path")),Wf=Dt(on()),Gf=wo(),Vf=xo(),Jf=So(),Kf=To();function Fo(){return!0}var Yf=Io();async function Qf(e,t,r,s=Fo,n=Fo,o=!1,i=!1){if(!e)throw new Error("Missing user argument");if(!t)throw new Error("Missing user argument");let a=new Yf(process.stderr),u=await(0,Gf.getReleases)(e,t),f=(0,Vf.getLatest)(u,s,n);if(!f)throw new Error(`Could not find a release for ${e}/${t} (${Lo.default.platform()} ${Lo.default.arch()})`);i||console.error(`Downloading ${e}/${t}@${f.tag_name}...`);let l=f.assets.map(async d=>{let h;if(process.stdout.isTTY&&!i){let g=a.newBar(`${(0,Kf.rpad)(d.name,24)} :bar :etas`,{complete:"\u2587",incomplete:"-",width:process.stdout.columns-36,total:100});h=g.update.bind(g)}if(r=ps.default.isAbsolute(r)?r:ps.default.resolve(r),Le.default.existsSync(r)||Le.default.mkdirSync(r),!Le.default.statSync(r).isDirectory())throw new Error(`Output path "${r}" must be a directory`);let y=ps.default.join(r,d.name);if(!Le.default.existsSync(y)){let g=Le.default.createWriteStream(y);await(0,Jf.download)(d.url,g,h),!o&&/\.zip$/.exec(y)&&(await(0,Wf.default)(y,{dir:r}),Le.default.unlinkSync(y))}return y});return Promise.all(l)}Fe.downloadRelease=Qf});var Mo=x(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.downloadRelease=void 0;var Xf=jo();Object.defineProperty(Bt,"downloadRelease",{enumerable:!0,get:function(){return Xf.downloadRelease}})});var rd={};Bo(rd,{activate:()=>ed,deactivate:()=>td});module.exports=Wo(rd);var te=$o(require("vscode")),je=require("path"),Me=require("fs"),Zf=Mo();function ed(e){let t=async s=>{let n="reznikmm",o="jupyter",i=e.extensionPath,a=!1,u=!1,f=l=>l.name.includes(process.platform+"-"+process.arch);Zf.downloadRelease(n,o,i,void 0,f,a,u).then(async()=>{Me.readFile(je.join(i,je.basename(s)),"utf8",async(l,d)=>{if(!l){let h=je.dirname(s),y=JSON.parse(d);y.argv[0]=je.join(i,"ada_kernel"),Me.existsSync(h)||Me.mkdirSync(h,{recursive:!0}),Me.writeFileSync(s,JSON.stringify(y,null,4));let g=await te.workspace.openTextDocument(s);await te.window.showTextDocument(g,{preview:!1}),te.window.showInformationMessage("The Ada Kernel has been installed!")}})}).catch(function(l){te.window.showErrorMessage(l.message)})},r=te.commands.registerCommand("jupyter-ada-kernel.install",()=>{let s=process.env.JUPYTER_PATH||je.join(process.env.HOME||"/",".local","share","jupyter"),n=je.join(s,"kernels","ada","kernel.json");Me.readFile(n,"utf8",(o,i)=>{var a=!1;if(!o){let u=JSON.parse(i);a=Me.existsSync(u.argv[0]||"/#no-such-file")}a?te.window.showInformationMessage("The Ada Kernel is in place, no installation required."):t(n)})});e.subscriptions.push(r)}function td(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

progress/lib/node-progress.js:
  (*!
   * node-progress
   * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
   * MIT Licensed
   *)
*/
